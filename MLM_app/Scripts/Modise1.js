function Navigation(n) { var t = this; this.options = $.extend({ activeClass: "selected" }, n); this.getCurrentUrl = function () { return location.pathname }; this.markCurrentNode = function () { var n = this.getIndex(); typeof n == "number" && ($(t.options.root).eq(n).addClass(t.options.activeClass), t.options.addition && $(t.options.addition).eq(n).addClass(t.options.activeClass)) }; this.isCurrentNode = function (n) { var t = n.find("> a"); return t.length || (t = n.find("> div > a")), t.attr("href") === location.pathname }; this.getIndex = function () { for (var f, i = function (n) { var r, f, u, e; if (t.isCurrentNode(n)) return !0; if (r = n.find(t.options.child), !r.length) return !1; for (f = !1, u = 0; u < r.length; u++) if (e = i(r.eq(u)), e) { f = !0; break } return f }, r, u = $(t.options.root), n = 0; n < u.length; n++) if (f = i(u.eq(n)), f) { r = n; break } return r } } function QuickOrderViewModel() { var i = function () { $("#quickOrder .ddlb select").selectmenu("refresh") }, n = this, t, r; n.quickOrderForm = ko.observable(); n.request = ko.observable(); n.isInputActivated = ko.observable(); n.productSourceUrl = ko.observable(); n.product = ko.observable(); n.quantity = ko.observable(); n.productNotFound = ko.observable(!1); n.request.subscribe(function () { n.productNotFound(!1) }); n.selectedVerticalComponent = ko.observable(); n.selectedVerticalComponent.subscribe(function (t) { setTimeout(function () { i(); t && t.HorizontalComponents && n.selectedHorizontalComponent(t.HorizontalComponents[0]) }, 10) }); n.selectedHorizontalComponent = ko.observable(); n.selectedHorizontalComponentId = ko.computed({ read: function () { if (n.selectedHorizontalComponent()) return n.selectedHorizontalComponent().Id }, write: function (t) { if (t) { var i = ko.utils.arrayFilter(n.selectedVerticalComponent().HorizontalComponents, function (n) { return n.Id == t })[0]; n.selectedHorizontalComponent(i) } } }); n.selectedUnitOfMeasure = ko.observable(); n.selectedUnitOfMeasure.subscribe(function (t) { t && n.quantity(t.Step) }); n.quantityStep = ko.computed(function () { var t = n.selectedHorizontalComponent(), i = n.selectedUnitOfMeasure(); return t && t.IsPrepack ? 1 : i ? i.Step : 1 }); n.quantityStep.subscribe(function (t) { n.quantity(t); setTimeout(function () { n.quickOrderForm().refreshValidation() }, 50) }); n.validationMassagePattern = ko.observable(); n.validationMassage = ko.computed(function () { var t = n.validationMassagePattern() || ""; return t.replace(/\{0\}/g, n.quantityStep()) }); t = function (t) { return n.selectedVerticalComponent() ? ko.utils.arrayFilter(n.selectedVerticalComponent().HorizontalComponents, function (n) { return t(n) }) : null }; n.variants = ko.computed(function () { return t(function (n) { return !n.IsPrepack }) }); n.prepacks = ko.computed(function () { return t(function (n) { return n.IsPrepack }) }); n.searchProduct = function () { if (!n.request()) { n.product(null); return } Sana.UI.LoadingIndicator.show(); $.post(n.productSourceUrl(), { term: n.request() }, function (t) { var r, u; if (Sana.UI.LoadingIndicator.hide(), !t) { n.product(null); n.productNotFound(!0); return } n.product(t); n.selectedVerticalComponent(null); n.selectedHorizontalComponent(null); t.Variants.length > 0 && (r = t.Variants[0], n.selectedVerticalComponent(r), r.HorizontalComponents.length > 0 && n.selectedHorizontalComponent(r.HorizontalComponents[0])); n.selectedUnitOfMeasure(null); t.UnitsOfMeasure.length > 0 && (u = $.grep(t.UnitsOfMeasure, function (n) { return n.Id == t.DefaultUnitOfMeasureId })[0], n.selectedUnitOfMeasure(u)); n.quantity(n.quantityStep()); Sana.UI.Selects.init(); i(); $("#quickOrder .ui-autocomplete-input")._autocomplete("close"); n.quickOrderForm().refreshValidation() }) }; r = function (n, t) { var i = []; for (var r in t) i.push({ name: "lines[" + n + "]." + r, value: t[r] }); return i }; n.addQuickOrderLine = function () { if (n.quickOrderForm().valid()) { var t = $("#basket"); if (!t.valid()) { $(".input-validation-error").focus(); return } n.quickOrderForm().refreshValidation(n.quantityStep()); Sana.UI.LoadingIndicator.show(); setTimeout(function () { var i = {}, f, u, e, o, s, h; i.productId = n.product().Id; i.quantity = parseFloat(n.quantity()); f = n.selectedUnitOfMeasure(); f && (i.unitOfMeasureId = f.Id); u = n.selectedHorizontalComponent(); u ? (i.variantId = u.Id, i.isPrepack = u.IsPrepack, i.verticalCode = u.VerticalCode) : (i.isPrepack = !1, e = n.selectedVerticalComponent(), e && (i.variantId = e.Id)); o = t.find('[name^="lines["]').map(function (n, t) { return /lines\[(\d+)\]/g.exec(t.name)[1] }); s = 0; o.length > 0 && (s = Math.max.apply(Math, o) + 1); h = r(s, i); n.quantity(n.quantityStep()); $(QuickOrder).trigger("addQuickOrderLine", [h]) }, 15) } }; n.setValueAttribute = function (n, t) { $(n).attr("value", t.Id) } } function checkforGA() { if ($("#flexiPage").length > 0) $("#flexiPage .flow-img-tiles img").on("click", function () { var n = $(this).attr("src"), t; n = n.split("/"); n = n[n.length - 1]; t = $("#flexiPage").attr("data-url"); t += " | " + n; ga("send", "event", "banner", "click", t) }); if ($("body").hasClass("checkout-orderaddress-page")) $("body.checkout-orderaddress-page form .btn-action").on("click", function () { ga("send", "event", "button", "click", "Submit Address") }); if ($("body").hasClass("checkout-shippingmethods-page")) $("body.checkout-shippingmethods-page form .btn-action").on("click", function () { ga("send", "event", "button", "click", "Submit Shipping") }); if ($("body").hasClass("checkout-paymentmethods-page")) $("body.checkout-paymentmethods-page form .btn-action").on("click", function () { ga("send", "event", "button", "click", "Submit Payment Method") }); if ($("body").hasClass("checkout-orderoverview-page")) $("body.checkout-orderoverview-page form .btn-action").on("click", function () { ga("send", "event", "button", "click", "Submit Order final") }); if ($("body").hasClass("product-details-page")) $("body.product-details-page form .btn-action").on("click", function () { var n = $(".font-product-title").text(), t = $("#productId").val(); ga("send", "event", "button", "add to basket", n + " | " + t) }); if ($("body").hasClass("product-details-page")) { var n = $(".font-product-title").text(), t = $("#productId").val(); ga("send", "event", "page", "load", n + " | " + t) } } function extJs() { $.getScript("/content/files/extJs/olark.js", function () { }) } function owlFlow() { owl_flow.owlCarousel({ margin: 12, rtl: !0, loop: !0, nav: !0, lazyLoad: !0, mergeFit: !0, navText: ["<i class='fa fa-angle-right'><\/i>", "<i class='fa fa-angle-left'><\/i>"], responsive: { 320: { slideBy: 2, items: 2 }, 480: { slideBy: 2, items: 2 }, 640: { slideBy: 2, items: 2 }, 768: { slideBy: 3, items: 3 }, 960: { slideBy: 4, items: 4 } } }) } function BasketViewModel() { var n = this; this.linesCount = ko.observable(); this.linesCount.subscribe(function () { n.isEmpty(n.linesCount() == 0) }); this.isEmpty = ko.observable(); this.isEmpty.subscribe(function () { $(".btn-checkout").toggleClass("btn-disabled", n.isEmpty()); $(".hyp-update, .hyp-wishlist, .hyp-save, .hyp-clear").toggleClass("hyp-btn-disabled", n.isEmpty()); $("#basketPage").toggleClass("basket-empty", n.isEmpty()) }); this.checkLines = function () { n.linesCount($(".gvi-basket tr.upper-row").length) }; this.quickOrderLine = ko.observable(null); this.getDataToSent = function (t) { var r = dataToSend = $.param(n.quickOrderLine() || []), i = t.serialize(); return i && (dataToSend = r + "&" + i), dataToSend } } function setFacH() { $(".facets .facet").each(function (n, t) { parseInt($(t).height()) > 200 && $(t).find(".cnt").height(200).perfectScrollbar({ suppressScrollX: !0 }) }) } function infiniteScroll() { var t; if ($("body").is(".productlist-list-page, .productlist-search-page") && $(".btn-load-more").length > 0) { var r = $(".btn-load-more").offset().top, n = $(".btn-load-more").attr("data-page"), i = $(".btn-load-more").attr("data-lastpage") - 1; $("footer").hide(); $(".btn-load-more").css("visibility", "hidden"); function u() { $(".btn-load-more").click(); t = 1; n = $(".btn-load-more").attr("data-page"); i == n && (n++, $("footer").show()) } win_scroll_top = parseInt($(window).scrollTop()) + parseInt($(window).height()) + $(window).height() / 2; $(window).scrollTop() < $(window).height() / 2 && u(); $(".last-viewed").length > 0 && $(".last-viewed").hide(); t = 0; $(window).scroll(function () { var f = parseInt($(window).scrollTop()) + parseInt($(window).height()) + $(window).height() / 2; f >= r && i >= n && ajax_loading === !1 ? t == 0 && u() : i >= n && $("footer").show() }); $(document).ajaxComplete(function () { t = 0; r = $(".btn-load-more").offset().top }) } } function PiwikAnalytics() { var n, f, u, t = 0, i, e, o, r, s, h; if ($(".product-details-page").length > 0 && (n = $("#productId").val(), f = $(".control .prices-action .prices .lbl-price").text(), u = f.replace(/[^0-9\.]+/g, "")), typeof _paq != "undefined") { $(".nav-item a").click(function () { _paq.push(["trackEvent", "Menu", "Visited Menu Items", $(this).text()]) }); $("#btnClearBasket").click(function () { $(".gvi-basket > tbody  > tr").each(function () { _paq.push(["trackEvent", "Basket", "Remove Products From The Basket", $(this).find(".product-id .value:first").text(), $(this).find("input.numeric").val()]) }); t = 0; _paq.push(["trackEcommerceCartUpdate", 0]) }); $(document).on("click", ".hyp.hyp-remove", function () { _paq.push(["trackEvent", "Basket", "Remove Products From The Basket", $(this).closest("tr").find(".product-id .value:first").text(), $(this).closest("tr").find(".product-total .cell-total-value:first").text().replace(/[^0-9\.]+/g, "")]) }); $(document).on("click", ".basket-details-page .addToWishlist", function () { _paq.push(["trackEvent", "Basket", "Add To My Favorite From The Basket", $(this).closest("tr").find(".product-id .value:first").text()]) }); $(document).on("click", "#basketPage .top_tools > li", function () { _paq.push(["trackEvent", "Basket", "Referring To The Links In The Basket", $(this).find(".text .title:first").text()]) }); $(document).on("click", ".checkout-page-cnt a", function () { this.href && _paq.push(["trackEvent", "Basket", "Reviewing The Basket In The Basket(itself)", "Reviewing The Basket"]) }); $(".btn-add-to-basket").click(function () { _paq.push(["trackEvent", "Product", "Add Products To The Basket", n, u]) }); $(document).on("click", ".product-details-page .fa-envelope-square", function () { _paq.push(["trackEvent", "Product", "Share product via email", n]) }); $(document).on("click", ".product-details-page .fa-facebook-square", function () { _paq.push(["trackEvent", "Product", "Share product via Facebook", n]) }); $(document).on("click", ".product-details-page .wish_list", function () { _paq.push(["trackEvent", "Product", "Add to wishlist", n]) }); $(document).on("click", ".product-details-page .product-bottom-info ul li a", function () { _paq.push(["trackEvent", "Product", $(this).text(), n]) }); $(document).on("click", ".star-rating  a", function () { _paq.push(["trackEvent", "Product", "Product Rating", n, $(this).text()]) }); $(document).on("click", ".size-guide", function () { _paq.push(["trackEvent", "Product", "Size Selection Guide", n]) }); $(document).on("click", ".half_row .ui-menu", function () { $("#product-form").valid && _paq.push(["trackEvent", "Product", $(this).closest(".half_row").find(".label label").text(), n]) }); $(document).on("click", ".btn-checkout", function () { $("#ShipToCustomAddress").is(":checked") && _paq.push(["trackEvent", "CheckOut", "Changing The Address In The Basket", r]) }); $(document).on("click", ".checkout-paymentmethods-page .btn-checkout", function () { var n; $(".gvi-methods > tbody > tr ").each(function () { $(this).find('label .rdb input[type="radio"]:checked').closest("tr").find(".method-title").text() && (n = $(this).find('label .rdb input[type="radio"]:checked').closest("tr").find(".method-title").text()) }); _paq.push(["trackEvent", "CheckOut", "Payment Methods", n]) }); $(".productlist-list-page ul.reset li a").click(function () { var i; if ($(this).text().trim() !== "X") { var r = $(".breadcrumbs ul li:last").text().trim(), n = $(this).closest(".facet").find(".expanded h4").text().trim(), t = $(this).attr("title"); n.length > 0 && t.length > 0 && (i = String.format("Cat({0}) - Box({1}) - Filter({2})", r, n, t), _paq.push(["trackEvent", "Products Category", "View Filter Of The Product Category", i])) } }); $(".productlist-list-page").length && (i = 0, $(this).scroll(function () { parseFloat($(".btn-load-more").attr("data-page")) > i && (i = parseFloat($(".btn-load-more").attr("data-page"))) }), $(document).click(function () { var n = String.format("Cat({0}) - Index({1})", $(".breadcrumbs ul li:last").text().trim(), i); _paq.push(["trackEvent", "Products Category", "View More Of The Product Category", n]) }), _paq.push(["setEcommerceView", productSku = !1, productName = !1, category = $(".breadcrumbs ul li:last").text().trim()])); $(".owl-controls , .owl-prev .owl-next").click(function () { var n = $(this).closest(".flexi-row").prev().text(); _paq.push(["trackEvent", "Landing Page", "View More", n]) }); $(document).on("click", "#subscribeNewsletterPage .btn", function () { $(".form-holder form").valid() && _paq.push(["trackEvent", "Register", "  ", $("#Email").val()]) }); $(document).on("click", ".newsletter-line .btn", function () { $(".newsletter form").valid() && c($("#newsletterEmail").val()) && _paq.push(["trackEvent", "Register", "Newsletter Subscription Email", $("#newsletterEmail").val()]) }); $(document).on("click", "#createAccountPage .btn", function () { $("#createAccountPage form").valid() && _paq.push(["trackEvent", "Register", "Register", $("#LoginData_UserName").val()]) }); $("#basketPage").length && (e = $(".gvi-totals thead tr .cell-value .cell-price-value").text().replace(/[^0-9\.]+/g, ""), o = $(".gvi-totals tbody:first tr .cell-value .cell-price-value").text().replace(/[^0-9\.]+/g, ""), localStorage.setItem("SubTotal", e), localStorage.setItem("DiscountAmount", o), t = 0, $(".gvi-basket > tbody  > tr").each(function () { t += parseFloat($(this).find(".product-total .cell-total-value:first").text().replace(/[^0-9\.]+/g, "")); _paq.push(["addEcommerceItem", $(this).find(".product-id .value:first").text(), $(this).find(".product-info .product-title-super:first").text(), !1, parseFloat($(this).find(".product-total .cell-total-value:first").text().replace(/[^0-9\.]+/g, "")), parseInt($(this).find("input.numeric").val())]) }), t > 0 && _paq.push(["trackEcommerceCartUpdate", t])); $(".user-name").length > 0 && (r = localStorage.getItem("UserMail"), _paq.push(["setUserId", r])); $(".productlist-search-page").length && (s = $(".counter-inside").text(), h = s.replace(/[^0-9\.]+/g, ""), _paq.push(["trackSiteSearch", $("#searchbox").val(), !1, h])); $(".product-details-page").length && _paq.push(["setEcommerceView", $("#productId").val(), $(".font-product-title").text().trim(), $(".breadcrumbs ul li:last").text().trim(), u]); $("body.system-notfound-page").length && (_paq.push(["setDocumentTitle", "404/URL = " + encodeURIComponent(document.location.pathname + document.location.search) + "/From = " + encodeURIComponent(document.referrer)]), _paq.push(["trackPageView"])); $(".error-page").length && (_paq.push(["setDocumentTitle", "500/URL = " + encodeURIComponent(document.location.pathname + document.location.search) + "/From = " + encodeURIComponent(document.referrer)]), _paq.push(["trackPageView"])); function c(n) { return /^([a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+(\.[a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)*|"((([ \t]*\r\n)?[ \t]+)?([\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*(([ \t]*\r\n)?[ \t]+)?")@(([a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.)+([a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.?$/i.test(n) } String.format = function () { for (var i, t = arguments[0], n = 0; n < arguments.length - 1; n++) i = new RegExp("\\{" + n + "\\}", "gm"), t = t.replace(i, arguments[n + 1]); return t }; $(".checkout-ordersubmit-page").length && PiwikOrderTracking() } } var Sana, Matrix, Popup, QuickOrder, Zoom, isMobile, owl_flow, owl_flow_cl, OrderDetails, ProductDetails, MyAccount; ko.bindingHandlers.attributeToObservable = { init: function (n, t, i, r) { var arguments = t(), u, f, e; for (u in arguments) f = arguments[u], e = $(n).attr(u), r[f](e) } }; ko.bindingHandlers.form = { init: function (n, t, i, r) { var u = $(n), f; u.refreshValidation = function () { Sana.Utils.refreshFormValidation(u) }; f = t(); r[f](u) } }; Print = function () { var n = {}; n.init = function () { $(document).on("click", ".hyp-print-preview", i); var n = document.location.href; n.indexOf("print=1") != -1 && ($(window).off("scroll.ribbon"), $(".btn-print").on("click", function () { window.print(); window.location.reload() }).prependTo(".site").show(), setTimeout(function () { u() }), r()) }; var t = function () { var n = "", r = $(".ddlb-component select").map(function () { return $(this).val() }).get().join(), t, i; return r.length > 0 && (n += "&v=" + encodeURIComponent(r)), t = $(".ddlb-uom select"), t.length > 0 && (n += "&unitOfMeasureId=" + encodeURIComponent(t.val())), i = $(".ddlb-prepack-selector select"), i.length > 0 && (n += "&pack=" + encodeURIComponent(i.val())), n }, i = function () { var n = document.location.href; n += n.indexOf("?") != -1 ? "&print=1" : "?print=1"; n += t(); window.open(n, "_blank") }, r = function () { var n = document.getElementById("productPage"); n != null && $("#variants, #prepacks").each(function () { var n = $(this).attr("id"), t = $("[href=#" + n + "]").text(); $("<h2/>", { text: t }).prependTo($(this)) }) }, u = function () { var n = $(".ddlb-component, .ddlb-prepack-selector, .ddlb-uom"); n.length ? n.each(function () { var n = $(this); $("<label/>", { text: n.find("option:selected").text() }).appendTo(n.parent()) }) : $(".order-box").hide() }; return n }(); $(function () { Print.init() }); window.matchMedia || (window.matchMedia = function () { "use strict"; var t = window.styleMedia || window.media; if (!t) { var n = document.createElement("style"), i = document.getElementsByTagName("script")[0], r = null; n.type = "text/css"; n.id = "matchmediajs-test"; i.parentNode.insertBefore(n, i); r = "getComputedStyle" in window && window.getComputedStyle(n, null) || n.currentStyle; t = { matchMedium: function (t) { var i = "@media " + t + "{ #matchmediajs-test { width: 1px; } }"; return n.styleSheet ? n.styleSheet.cssText = i : n.textContent = i, r.width === "1px" } } } return function (n) { return { matches: t.matchMedium(n || "all"), media: n || "all" } } }()); Sana = Sana || {}; Sana.Layout = function () { var n = { touch: !1, retinaDisplay: !1, layout: !1, rules: { ALL: "", DESKTOP: "only screen and (min-width: 1024px)", TABLET: "only screen and (min-width: 640px) and (max-width: 1023px)", MOBILE: "only screen and (max-width: 639px)" }, functions: { ALL: [], DESKTOP: [], TABLET: [], MOBILE: [] }, isIE: !1, init: function () { var t = this, i = navigator.userAgent.toLowerCase(); t.touch = this.isTouchDevice(); "devicePixelRatio" in window && window.devicePixelRatio >= 1.9 && (t.retinaDisplay = !0); i.indexOf("msie") != -1 && (t.isIE = !0); jQuery(document).ready(function () { t.callFuctions() }); jQuery(window).resize(function () { n.isRule(t.layout) || t.callFuctions() }) }, addFunction: function (n, t) { this.functions[t].push(n) }, isRule: function (n) { return window.matchMedia(this.rules[n]).matches ? !0 : !1 }, callFuctions: function () { for (var n = 0, t = this.functions.ALL.length; n < t; n++) this.functions.ALL[n](); this.widthMedia() }, widthMedia: function () { var i = "", n, t, r; for (n in this.rules) i += " ui-" + n.toLowerCase(); jQuery("body").removeClass(i); for (n in this.rules) if (n != "ALL" && window.matchMedia(this.rules[n]).matches) for (jQuery("body").addClass("ui-" + n.toLowerCase()), this.layout = n, t = 0, r = this.functions[n].length; t < r; t++) this.functions[n][t]() }, isTouchDevice: function () { return this.isIE ? !1 : typeof ontouchstart != "undefined" ? (jQuery("body").addClass("ui-touch-device"), !0) : !1 } }; return n }(); Sana = Sana || {}; Sana.UI = function () { var n = {}; return n.init = function () { n.markCurrentMenuItem(); n.RibbonHeader.init(); Sana.Layout.addFunction(function () { n.footerPosition() }, "ALL"); n.Inputs.init(); n.Datepickers.init(); n.Selects.init(); n.Newsletter.init(); n.ActionLinks.Login.init(); n.Toggler.init(".accordion-header"); n.Tabs.init(); n.ActionLinks.LastViewed.init(); n.LazyMenu.init(); n.NumberTextBox.init(); Sana.Layout.init(); Sana.UI.Tooltips.init(".tooltip") }, n.footerPosition = function () { var n = $(window).height() - $(".content").offset().top - $("footer").outerHeight(); $(".content").css({ "min-height": n }) }, n.LoadingIndicator = { _selector: "#loadingIndicator", _timeout: null, show: function () { $(this._selector).show() }, hide: function () { clearTimeout(this._timeout); this._timeout = null; $(this._selector).hide() }, showAfter: function (n) { var t = this; t._timeout = setTimeout(function () { t._timeout != null && (t._timeout = null, t.show()) }, n) } }, n.Tooltips = { init: function (n) { $(n).tooltip({ position: { my: "left-25% bottom-25" }, content: function () { var n = [], r = $(this).attr("title") || "", t, i; return n = r.split("::"), t = n[0] ? "<h4>" + n[0] + "<\/h4>" : "", i = n[1] || "", $("<a>").html(t + i).html() } }) } }, n.Inputs = { init: function () { Sana.Utils.noPlaceholder() && $("#newsletterEmail, #searchbox").each(function () { var n = $(this); n.watermark(n.attr("placeholder"), { className: "water-mark", useNative: !1 }) }); $(document).on("focus blur", ".tbx input, .tar textarea", function (n) { $(this).parent().toggleClass("focused", n.type == "focusin") }) } }, n.Autocomplete = { _extended: !1, init: function (t) { n.Autocomplete._extended || n.Autocomplete._extend(); var i = $(t.options.selector); i.each(function (n, i) { var r = $(i); r._autocomplete({ source: function (n, i) { $.ajax({ url: r.attr("data-src") + "?term=" + r.val(), type: "GET", success: function (n) { i($.map(n, function (n) { return t.mapping(n, r.val()) })); _paq && _paq.push(["trackSiteSearch", r.val(), !1, 1]) } }) }, select: function (n, i) { t.onItemSelect(n, i) }, minLength: t.options.minLength || 1, delay: t.options.delay || 300 }) }) }, _extend: function () { $.widget("ui._autocomplete", $.extend({}, $.ui.autocomplete.prototype, { _renderItem: function (n, t) { return $("<li>").append($("<a>").html(t.label)).appendTo(n) } })); $.ui._autocomplete.defaults = $.extend({}, $.ui.autocomplete.defaults); n.Autocomplete._extended = !0 } }, n.Datepickers = { init: function () { $(document).on("click", ".tbx-date", function () { $("input", this).focus() }); $(".datepicker").each(function () { var $self = $(this), str = $self.attr("data-datepicker-options") || "{}"; eval("var options = " + str + ";"); $self.datepicker(options).on("change", function () { $self.parents("form:first").valid() }); $self.next().attr("tabindex", "-1") }) } }, n.Selects = { init: function (n) { $selects = n ? $(n) : $(".ddlb select"); $selects.each(function (n, t) { var i = $(t); i.selectmenu({ width: "100%", appendTo: i.parent(".ddlb"), change: function () { i.change() }, select: function () { i.click() } }) }) } }, n.RibbonHeader = { isVisible: !1, $ribbon: $(".ribbon-header"), $static: $("header"), $a: $("#a"), $b: $("#b"), $site: $(".site"), $mobHeadMiddle: $(".mob-middle-cell"), $mobHeadBottom: $(".mob-bottom-cell"), init: function () { Sana.Layout.addFunction(function () { $(window).off("scroll.ribbon"); n.RibbonHeader.$mobHeadMiddle.detach(); n.RibbonHeader.$mobHeadBottom.detach(); n.RibbonHeader.initDesktop(); n.RibbonHeader.fixHeightOverflow() }, "DESKTOP"); Sana.Layout.addFunction(function () { $(window).off("scroll.ribbon"); n.RibbonHeader.$mobHeadMiddle.detach(); n.RibbonHeader.$mobHeadBottom.detach(); n.RibbonHeader.initTablet(); n.RibbonHeader.fixHeightOverflow() }, "TABLET"); Sana.Layout.addFunction(function () { $(window).off("scroll.ribbon"); n.RibbonHeader.initMobile() }, "MOBILE"); n.RibbonHeader.fill(); n.Autocomplete.init({ options: { selector: ".tbx-main-search input", minLength: 2, delay: 100 }, mapping: function (n, t) { var i = $("<span>", { "class": "suggest-img" }).append($("<img>", { src: n.ImageUrl, alt: n.Title })), r = $("<span>", { "class": "suggest-text" }).append($("<span>", { "class": "suggest-title-id" }).html(Sana.Utils.highlightWords(n.Title + " - " + n.Id, t))).append($("<span>", { "class": "font-lighter font-smaller" }).text(n.Category || "")), u = $("<span>", { "class": "suggest-item", "data-url": n.Url }).append(i).append(r); return { label: u, value: n.Title } }, onItemSelect: function (n, t) { n.preventDefault(); Sana.UI.LoadingIndicator.show(); document.location.href = t.item.label.attr("data-url") } }) }, fill: function () { $(".nav-main").clone(!0).appendTo(".nav-cell"); $(".logo").clone(!0).appendTo(".logo-cell"); $(".search").clone(!0).appendTo(".search-cell"); $(".language").clone(!0).appendTo(".top-action-cell"); $(".login").clone(!0).appendTo(".top-action-cell"); $(".basket").clone(!0).appendTo(".top-action-cell"); $(document).on("click", ".nav-opener", function () { $(".ribbon-header").toggleClass("nav-is-opened nav-is-closed"); $(".mob-middle-cell").stop(!0, !0).slideToggle(200) }); $(".top-action-cell .language").clone(!0).toggleClass("top-dropdown mob-dropdown").appendTo(".mob-middle-cell"); n.Toggler.init(".language.mob-dropdown .opener"); $(".top-action-cell .login").clone(!0).toggleClass("top-dropdown mob-dropdown").appendTo(".mob-middle-cell"); n.Toggler.init(".login.mob-dropdown .opener"); $(".search-cell .search").clone(!0).appendTo(".mob-bottom-cell"); $(".nav-head-mob").on("click", function (n) { var t, i; $(n.target).hasClass("hyp-view") || (t = $(this).next(".nav-lvl-2-mob"), t.length) && (n.preventDefault(), i = !1, t.is(":visible") || (i = !0), $(".nav-lvl-2-mob").stop(!0, !0).slideUp(200).prev().removeClass("current"), i && (t.stop(!0, !0).slideDown(200), t.prev().addClass("current"))) }) }, initDesktop: function () { var t = function () { var t = $(window).scrollTop() > n.RibbonHeader.$static.height(); !n.RibbonHeader.isVisible && t && (n.RibbonHeader.$ribbon.appendTo(n.RibbonHeader.$static).show(), n.RibbonHeader.$a.find(".basket").clone(!0).replaceAll(n.RibbonHeader.$ribbon.find(".basket")), n.BasketSummary.refresh(), n.RibbonHeader.$static.css("min-height", n.RibbonHeader.$static.height()), n.RibbonHeader.$a.detach(), n.RibbonHeader.$b.detach(), n.RibbonHeader.isVisible = !0, n.RibbonHeader.$ribbon.addClass("animate")); n.RibbonHeader.isVisible && !t && (n.RibbonHeader.$a.appendTo(n.RibbonHeader.$static), n.RibbonHeader.$b.appendTo(n.RibbonHeader.$static), n.RibbonHeader.$ribbon.find(".basket").clone(!0).replaceAll(n.RibbonHeader.$a.find(".basket")).removeClass("show320"), n.BasketSummary.refresh(), n.RibbonHeader.$ribbon.removeClass("animate"), n.RibbonHeader.$ribbon.detach(), n.RibbonHeader.isVisible = !1); n.RibbonHeader.isVisible || t || n.RibbonHeader.$ribbon.detach() }; t(); $(window).on("scroll.ribbon", Sana.Utils.throttle(t, 300)) }, initTablet: function () { n.RibbonHeader.$ribbon.prependTo(n.RibbonHeader.$static).show(); n.RibbonHeader.isVisible = !0; n.RibbonHeader.$static.css("min-height", n.RibbonHeader.$ribbon.height()); n.RibbonHeader.$a.detach(); n.RibbonHeader.$b.detach() }, initMobile: function () { n.RibbonHeader.$ribbon.prependTo(n.RibbonHeader.$static).show(); n.RibbonHeader.$mobHeadBottom.insertAfter(".sticky-elements"); n.RibbonHeader.$mobHeadMiddle.insertAfter(".sticky-elements"); n.RibbonHeader.isVisible = !0; n.RibbonHeader.$static.css("min-height", "auto"); n.RibbonHeader.$a.detach(); n.RibbonHeader.$b.detach(); $(".mob-middle-cell").toggle($(".ribbon-header").hasClass("nav-is-opened")) }, fixHeightOverflow: function () { var t = $(window).height() - n.RibbonHeader.$ribbon.height() - 15; $(".nav-wrapper").css("max-height", t); $(".basket-summary").css("max-height", t); $(".ui-autocomplete").css("max-height", t); $(".basket-link-cell").removeClass("show320") } }, n.scrollToNode = function (n, t) { var i = $(n).offset().top, r = t || 0, u = "WebkitAppearance" in document.documentElement.style; $(u ? "body" : "html").animate({ scrollTop: i - 60 - r }, 500) }, n.Tabs = { container: ".tab-control", init: function () { var t = this; $(this.container).tabs(); this.refresh(); $(".hyp-read-description,.size-guide,.hyp-read-reviews").click(function () { var t = "a[href='#" + $(this).attr("data-scroll-to") + "']"; Sana.Layout.layout == "MOBILE" && (t = "[data-tab-header=" + $(this).attr("data-scroll-to") + "]"); n.scrollToNode(t, 90); n.Tabs.select(t) }); n.Tabs.initMobile(".last-viewed"); n.Tabs.initMobile(".checkout-offers"); Sana.UI.priceStyle(".last-viewed"); Sana.UI.priceStyle(".checkout-offers") }, refresh: function () { $(this.container).each(function () { var n = $(this).find("ul li").length; n == 0 && $(this).css("visibility", "hidden") }) }, select: function (n) { $(n).click() }, remove: function (n) { var i = n.closest(this.container), t = n.closest("li"), r = t.parent().children().index(t); i.tabs("remove", r); this.refresh() }, initMobile: function (n) { var t, i = $(n), r; i && (r = function () { var t = n + ".tab-mobile .flow-products", i; $(t).length && (i = $(t).parent().width(), $(t).addClass("touchcarousel").css({ width: i, height: "auto" }).children().addClass("touchcarousel-container").children(":not(.empty-column)").addClass("touchcarousel-item").css({ width: i }), $(t).touchCarousel({ pagingNav: !0, scrollbar: !1, directionNavAutoHide: !1, itemsPerMove: 1, loopItems: !0, directionNav: !1, autoplay: !1, autoplayDelay: 2e3, transitionSpeed: 400 })) }, Sana.Layout.addFunction(function () { t = i.clone(!0).addClass("tab-mobile").insertAfter(n); i.detach(); r() }, "MOBILE"), Sana.Layout.addFunction(function () { t && (i.insertAfter(t), t.remove(), t = null) }, "TABLET"), Sana.Layout.addFunction(function () { t && (i.insertAfter(t), t.remove(), t = null) }, "DESKTOP")) } }, n.priceStyle = function () { }, n.tabsSliderHorizontal = { selector: ".tabs-horizontal", init: function () { var t = $(this.selector).find("li").length; if (t < 2) { $(".opacity-left, .opacity-right").hide(); return } $(".btn-prev").on("click", function () { var t = n.tabsSliderHorizontal.getCurrent(); n.tabsSliderHorizontal.selectTab(t.index - 1) }); $(".btn-next").on("click", function () { var i = n.tabsSliderHorizontal.getCurrent(), r = 0; t - i.index > 1 && (r = i.index + 1); n.tabsSliderHorizontal.selectTab(r) }); $(this.selector).find("li a").on("click", function () { var t = $(this).parent(); n.tabsSliderHorizontal.scrollTo({ width: t.width(), left: t.offset().left }) }) }, getCurrent: function () { var n = $(this.selector).find(".ui-tabs-active"); return { width: n.width(), index: n.index(), left: n.offset().left } }, scrollTo: function (n) { var t = $(this.selector).find(".ui-tabs-nav"), i, r; t.stop(!0); i = ($(".related-info").width() - n.width) / 2; r = n.left - $(this.selector).find(".ui-tabs-nav").offset().left - i; t.animate({ left: -r + "px" }, 500) }, selectTab: function (t) { $lnk = $(this.selector).find("li").eq(t).find("a"); n.Tabs.select($lnk); var i = n.tabsSliderHorizontal.getCurrent(); n.tabsSliderHorizontal.scrollTo(i) } }, n.Sorting = { selector: ".ddlb-sorting select", originalValue: null, init: function () { n.Sorting.originalValue = $(this.selector).val(); $(this.selector).change(function () { var t = $(this).val(); $(n.Sorting).trigger("beforeChange", [t]) }); $(n.Sorting).on("beforeChange", function () { n.Sorting.resolve() }) }, resolve: function () { document.location.href = $(this.selector).val() }, undo: function () { $(n.Sorting.selector).val(n.Sorting.originalValue); $(n.Sorting.selector).selectmenu("refresh") } }, n.LoadMore = { selector: ".btn-load-more", init: function (n, t) { $(this.selector).click(function () { var i = $(this), u = i.attr("href").replace(/(&|\?)?\bpage=\d+/i, ""), f = parseInt(i.attr("data-lastPage")), r = parseInt(i.attr("data-page")) + 1, arguments; return r || (r = 1), arguments = { page: r + 1 }, Sana.UI.LoadingIndicator.show(), i.addClass("loading"), $.get(u, arguments, function (u) { var e = $.parseHTML(u.trim()); $(n).append(e); t && t(e); r < f ? i.attr("data-page", r) : i.hide(); Sana.UI.LoadingIndicator.hide(); i.removeClass("loading") }), !1 }) } }, n.SelectionLost = { selector: "#selectionLostPopup", url: null, init: function () { $(this.selector).find(".btn-yes").click(function () { Sana.UI.LoadingIndicator.show(); Popup.close("#selectionLostPopup"); var t = $(this).attr("data-src"); $(n.SelectionLost).trigger("beforeChange", [t]) }); $(this.selector).find(".btn-no").click(function () { n.SelectionLost.resolve() }) }, open: function (t) { n.SelectionLost.url = t; Popup.open("#selectionLostPopup"); $(this.selector).find(".btn-yes").focus() }, resolve: function () { window.location.href = n.SelectionLost.url } }, n.Facets = { selector: ".facets", url: null, init: function () { var t = $(this.selector); if (t.length) { n.Toggler.init(".facet .hdr"); $(n.Facets).on("beforeChange", function () { n.Facets.resolve() }); $(this.selector).find("ul li a").on("click", function () { n.Facets.url = $(this).attr("href"); var t = $(this).find("[type=checkbox]"); return t && t.prop("checked") && (n.Facets.url = t.attr("data-uncheck")), $(n.Facets).trigger("beforeChange", [n.Facets.url]), !1 }) } }, resolve: function () { window.location.href = n.Facets.url } }, n.Newsletter = { selector: ".newsletter", init: function () { $(this.selector).find("form").submit(function (t) { var i = $(n.Newsletter.selector).find("#newsletterEmail").val(); i == "" && (t.preventDefault(), window.location.href = $(this).attr("action")) }) } }, n.BasketSummary = { selector: "#basketModalPopup", onBeforeChange: function () { Sana.Layout.layout == "MOBILE" ? $("#loadingIndicator").show() : $(".basket-loading").show() }, onChanged: function (t) { var i = parseFloat(t), r; if (isNaN(i) || i <= 0) { $(".basket-loading").hide(); return } r = $(".basket"); $.post(r.attr("data-src"), function (t) { $(".basket-loading").hide(); r.html(t); Sana.Layout.layout == "MOBILE" && ($("#loadingIndicator").hide(), $(".basket-link-cell .over-summary-number").remove(), $(".basket-link-cell .hyp").append($(t).find(".over-summary-number")), $("body").stop().animate({ scrollTop: 0 }, "500", "swing", function () { $(".basket-link-cell .over-summary-number").fadeIn(500).delay(2e3).fadeOut(1e3) })); $(n.BasketSummary.selector).addClass("just-added").show().fadeIn(500).delay(2e3).fadeOut(1e3, function () { n.BasketSummary.refresh() }).find(".added-product").slice(i).hide() }) }, refresh: function () { $(n.BasketSummary.selector).removeClass("just-added").removeAttr("style").find(".added-product").show() } }, n.ActionLinks = { AddToWishlist: { selector: "#addToWishlist", init: function () { $(this.selector).on("click", function () { var t = $(this), i = t.attr("data-url"), r = { productId: t.attr("data-product"), unitOfMeasureId: t.attr("data-uom"), variantId: $("#product-form *[name=variantId]").val(), __RequestVerificationToken: $('input[name="__RequestVerificationToken"]:first').val() }; n.LoadingIndicator.show(); $.post(i, r, function (i) { n.LoadingIndicator.hide(); i.match(/successPopup/g) && t.addClass("active"); var r = $("#addToWishlistPopup").html(i), f = r.find("button"), u = null; f.click(function () { Popup.close(r) }); Popup.open(r, { afterClose: function () { r.html(""); u != null && u.focus() } }); setTimeout(function () { u = document.activeElement; f.focus() }, 10) }) }) } }, AddToWishlisted: { selector: ".addToWishlist", init: function () { $(this.selector).on("click", function () { var t = $(this), i = t.attr("data-url"), r = { productId: t.attr("data-product"), unitOfMeasureId: t.attr("data-uom"), variantId: t.attr("variantId"), __RequestVerificationToken: $('input[name="__RequestVerificationToken"]:first').val() }; n.LoadingIndicator.show(); $.post(i, r, function (i) { var r, f, u; n.LoadingIndicator.hide(); r = t.next().html(i); t.addClass("active"); f = r.find("button"); u = null; f.click(function () { Popup.close(r) }); Popup.open(r, { afterClose: function () { r.html(""); u != null && u.focus() } }); setTimeout(function () { u = document.activeElement; f.focus() }, 10) }) }) } }, Login: { init: function () { $(document).on("click", "#unimpersonateLink, #logoutLink", function (t) { t.preventDefault(); n.LoadingIndicator.show(); var i = $(this).attr("href"), r = { __RequestVerificationToken: $('input[name="__RequestVerificationToken"]:first').val() }; $.post(i, r, function () { location.reload() }) }) } }, LastViewed: { init: function () { $(document).on("click", "#clearLastViewedProducts", function (n) { n.preventDefault(); var t = $(this), i = t.attr("href"); $.post(i, function () { var n = t.attr("data-src"); n != null ? location = n : t.parents(".last-viewed:first").remove() }) }) } } }, n.Toggler = { init: function (n) { $(document).off(".toggler", n); $(document).on("click.toggler", n, function () { var n = $(this); n.next().stop(!0, !0).slideToggle(200, function () { n.toggleClass("collapsed expanded") }) }); $(document).on("mouseenter.toggler mouseleave.toggler", n, function () { $(this).find(".btn").toggleClass("hover") }) } }, n.LazyMenu = { init: function () { var u = $(".mini, .multi"), n, t, i, r; u.length && (n = function (n, t) { var i = "nav-is-hovered", r = "hover", u = $.extend({ activate: function (n) { $(n).addClass(r).parent().addClass(i) }, deactivate: function (n) { $(n).removeClass(r) }, exitMenu: function (n) { return $(n).removeClass(i), !0 } }, t); n.menuAim(u) }, t = $(".bottom-header .nav-list-root"), n(t, { submenuDirection: "below" }), i = $(".nav-cell .nav-list-root"), n(i), r = $(".nav-list-sub"), n(r)) } }, n.markCurrentMenuItem = function () { var n = { selector: ".nav-main .nav-list-root", root: ".nav-main .nav-item-root", child: ".nav-list > .nav-item", addition: ".nav-list-root.mob .nav-item-root" }, i = $(n.selector), t; i.length && (t = new Navigation(n), t.markCurrentNode()) }, n.NumberTextBox = { init: function () { $(document).on("keypress", "input.integer", Sana.InputFilter.integer); $(document).on("keypress", "input.positive-integer", Sana.InputFilter.positiveInteger); $(document).on("keypress", "input.decimal", Sana.InputFilter.decimal); $(document).on("keypress", "input.positive-decimal", Sana.InputFilter.positiveDecimal) } }, n }(); $(function () { $("html").removeClass("no-js"); Sana.UI.init() }); Sana = Sana || {}; Sana.Urls = function () { var n = null, t = function () { if (n == null) { var t = document.getElementsByTagName("body")[0]; n = { Root: t.getAttribute("data-url-root"), Home: t.getAttribute("data-url-home") } } return n }, i = { Root: function () { return t().Root }, Home: function () { return t().Home }, RedirectBack: function () { var n = Sana.Utils.getQueryVariable("returnurl"); n && n.length != 0 || (n = i.Home()); window.location.href = n } }; return i }(); Sana = Sana || {}; Sana.Utils = function () { var n = {}; return n.replaceElements = function (n) { if (typeof n == "string") { var t = document.createElement("div"); t.innerHTML = n; n = $(t.childNodes) } n.each(function () { var n, t; if (this.tagName != undefined) { if (n = "#" + this.id, n == "#") { if (this.className == "") return; n = this.tagName + "." + this.className.split(" ").join(".") } t = $(n).html(this.innerHTML); $.validator.unobtrusive.parse(t) } }) }, n.setValidation = function (n) { return n.removeData("validator"), n.removeData("unobtrusiveValidation"), $.validator.unobtrusive.parse(n), n }, n.isMultiple = function (n, t) { if (n === 0) return !1; var i = Math.pow(10, 10), r = Math.round(n / t * i) / i; return r % 1 == 0 }, n.roundQuantity = function (n) { return Math.round(n * 1e4) / 1e4 }, n.validate = function (n) { var t = !0; return n.each(function (n, i) { if (!$(i).valid()) return t = !1, !1 }), t }, n.getQueryVariable = function (n, t) { var r, i, u; for (t = t || window.location.search, r = t.substring(1).split("&"), i = 0; i < r.length; i++) if (u = r[i].split("="), u[0] == n) return decodeURIComponent(u[1]) }, n.debounce = function (n, t, i) { var r; return function () { var u = this, f = arguments; clearTimeout(r); r = setTimeout(function () { r = null; i || n.apply(u, f) }, t); i && !r && n.apply(u, f) } }, n.throttle = function (n, t, i) { var r, f, u; return function () { f = arguments; u = !0; i = i || this; r || function () { u ? (n.apply(i, f), u = !1, r = setTimeout(arguments.callee, t)) : r = null }() } }, n.noPlaceholder = function () { return document.createElement("input").placeholder == undefined }, n.refreshFormValidation = function (n) { if (n = $(n), n.length != 0) { Sana.Utils.setValidation(n).validate(); var t = n.find("input[data-step]"); t.each(function (n, t) { var i = $(t), r = i.attr("data-step"); i.attr("data-step", r); i._spinner({ step: r }); i.rules().multipleof && (i.rules().multipleof.value = r) }); n.valid() } }, n.sendAjaxRequest = function (n, t, i) { return Sana.UI.LoadingIndicator.show(), $.ajax({ url: n, type: "get", cache: !1, success: function (n) { $("#" + t).html(n); Sana.UI.LoadingIndicator.hide(); i && i() } }) }, RegExp.escape = function (n) { return n.replace(/[.*+?|()\[\]{}\\$^]/g, "\\$&") }, n.highlightWords = function (n, t) { var i = new RegExp("(" + RegExp.escape(t) + ")", "gi"); return n.replace(i, function (n) { var t = $('<span class="highlight"><\/span>'); return t.text(n), t[0].outerHTML }) }, n.getScrollbarSize = function () { var t = 0, n = document.createElement("div"); return n.style.cssText = "width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;", document.body.appendChild(n), t = n.offsetWidth - n.clientWidth, document.body.removeChild(n), t }, n }(); $(function () { var n = $("[class$=-state] select"), i = $("[class$=-state] select"), t = $("[class$=-city] select"); $("body").hasClass("checkout-orderaddress-page") && n.each(function () { $("[class*=-countryid] select").each(function (i, r) { $(r).find("option").length < 3 && ($(r).val($(r).find("option").eq(1).val()).change().hide(), n.val(n.find("option").eq(1).val()).change(), t.val(t.find("option").eq(1).val()).change(), $(r).parentsUntil("#customShippingAddress").hide()) }) }); i.each(function () { var n = $(this), i = n.attr("name"), r, t; (i = i.slice(0, i.lastIndexOf(".") - 1), r = $('[class$=-countryid] select[name^="' + i + '"]'), r.length != 0) && (t = n.parents("[class$=-state]:first").find("input[type=text]"), n.dependent_on(r), n.change(function () { var i = n.find("option").length > 0; n.toggleClass("hide", !i).prop("disabled", !i); n.parents(".ddlb:first").toggleClass("hide", !i); t.length > 0 ? (t.toggleClass("hide", i).prop("disabled", i), t.parents(".tbx:first").toggleClass("hide", i), i && t.val("")) : n.parents(".form-row:first").toggleClass("hide", !i) }), n.trigger("change")) }) }); $(function () { var n = $("[class$=-city] select"); n.each(function () { var n = $(this), i = n.attr("name"), r, t; (i = i.slice(0, i.lastIndexOf(".") - 1), r = $('[class$=-state] select[name^="' + i + '"]'), r.length != 0) && (t = n.parents("[class$=-city]:first").find("input[type=text]"), n.dependent_on(r), n.change(function () { var i = n.find("option").length > 0; n.toggleClass("hide", !i).prop("disabled", !i); n.parents(".ddlb:first").toggleClass("hide", !i); t.length > 0 ? (t.toggleClass("hide", i).prop("disabled", i), t.parents(".tbx:first").toggleClass("hide", i), i && t.val("")) : n.parents(".form-row:first").toggleClass("hide", !i) }), n.trigger("change")) }) }); Matrix = { _formSelector: ".variants form", _inputsSelector: '.gvi-variants .tbx-quantity input[type="text"]', _uomSelector: ".gvi-variants select[name=unitOfMeasureId]", currentProductId: null, init: function (n) { n.addToBasketMode || (Matrix.currentProductId = n.currentPrductId, Matrix._loadVariants(), $.validator.unobtrusive.parse("#variantMatrixPopup")); $(document).off("change.matrixUom"); $(document).on("change.matrixUom", Matrix._uomSelector, function () { var i = $(this), t; Sana.UI.LoadingIndicator.show(); n.addToBasketMode ? (changeUrl = window.location.href, t = { unitOfMeasureId: $(Matrix._uomSelector).val(), __RequestVerificationToken: $('input[name="__RequestVerificationToken"]:first').val() }) : (changeUrl = $(Matrix._formSelector).attr("action"), t = $(Matrix._formSelector).serialize()); $.ajax(changeUrl, { type: "POST", data: t, dataFilter: function (n) { return $($.parseHTML(n.trim())) } }).done(function (t) { var i = t; n.addToBasketMode && (i = t.find(".variants")); Sana.Utils.replaceElements(i); Sana.UI.Selects.init(Matrix._uomSelector); Sana.UI.LoadingIndicator.hide(); n.addToBasketMode || Matrix._loadVariants() }) }); if (!n.addToBasketMode) { Sana.UI.Selects.init(Matrix._uomSelector); $(document).off("click.saveSelection"); $(document).on("click.saveSelection", "#variantMatrixPopup form .btn-save-selection", function () { return Sana.Utils.validate($("#variantMatrixPopup form")) && (Matrix._saveVariants(), Popup.close("#variantMatrixPopup")), !1 }); return } this.updateTotal(); $(document).on("change", Matrix._inputsSelector, function () { var n = Sana.Utils.validate($(Matrix._inputsSelector)); Matrix.updateTotal() }); $(document).on("submit", Matrix._formSelector, function () { Sana.UI.BasketSummary.onBeforeChange(); var n = Matrix.getTotalCount(); if (isNaN(n) || n <= 0) return Matrix.validator.setVisible(!0), !1; Popup.close("#matricesPopup") }) }, updateTotal: function () { Matrix.validator.setVisible(!1); var n = 0; $(Matrix._inputsSelector).each(function () { var t = parseFloat($(this).val()); isNaN(t) || (n += t) }); n = Sana.Utils.roundQuantity(n); Matrix.setTotalCount(n) }, validator: { selector: "#variantsValidationMsg", setVisible: function (n) { $(this.selector).toggleClass("hide", !n) } }, setTotalCount: function (n) { $(".variants-count .value").text(n) }, getTotalCount: function () { return parseFloat($(".variants-count .value").text()) }, resetCounts: function () { $(this._inputsSelector).val(""); this.setTotalCount(0) }, onVariantsAdded: function (n) { Matrix.resetCounts(); Sana.UI.BasketSummary.onChanged(n) }, _getProductLine: function () { return $('[data-id="' + Matrix.currentProductId + '"]') }, _getVariants: function (n) { var t = n.val(); return t != "" && typeof t != "undefined" ? $.evalJSON(t) : null }, _updateVariantsTotal: function (n) { var r = function () { var i = 0, r, t; for (r in n) t = n[r], i += t.step % 1 > 0 ? 1 : t.quantity; return i }, t = r(), i = Matrix._getProductLine(), u = i.find(".selected-quantity"), f = u.find(".value"); f.text(t); i.toggleClass("variants-selected", t > 0) }, _loadVariants: function () { var u = Matrix._getProductLine().find("input[name=variants]"), t = Matrix._getVariants(u), f = $(Matrix._uomSelector).val(), i, n, r; for (i in t) n = t[i], n.quantity > 0 && n.unitOfMeasureId == f && (r = $('#variantMatrixPopup input[name$=".Key"][value="' + n.variantId + '"]').next(), r.val(n.quantity)) }, _saveVariants: function () { var i = Matrix._getProductLine().find("input[name=variants]"), f = $('#variantMatrixPopup input[name$=".Key"]'), r = $(Matrix._uomSelector).val(), n = $.map(f, function (n) { var n = $(n), i = n.val(), u = n.attr("step"), t = Number(n.next().val()); if (t > 0) return { productId: Matrix.currentProductId, variantId: i, quantity: t, unitOfMeasureId: r, step: u } }), t = Matrix._getVariants(i); for (var u in t) t[u].unitOfMeasureId != r && n.push(t[u]); i.val($.toJSON(n)); Matrix._updateVariantsTotal(n) } }; $(function () { var n = $(".paging-ajax").attr("data-target-id"); $(document).on("click", ".paging-ajax a", function (t) { var i, r; t.preventDefault(); i = $(this).attr("href"); i && (r = Sana.Utils.sendAjaxRequest(i, n), r.success(function () { $("#" + n).trigger("updated", i) })) }) }); Popup = { open: function (n, t) { var i = $(n), r = $.extend({}, { draggable: !1, resizable: !1, width: "100%", minHeight: "inherit", modal: !0, appendTo: ".site" }, t); i.dialog(r); i.dialog({ close: function () { $(".ui-dialog").hasClass("ui-dialog-scroll") && ($("ui-dialog-scroll").removeClass("ui-dialog-scroll"), $("html").removeClass("fix-dialog-scroll-helper").css("margin-right", "initial")); i.dialog("destroy"); r.afterClose && r.afterClose() } }); Popup.fixScroll(n); i.off("click.dialog"); i.on("click.dialog", ".btn-close-dialog", function () { i.dialog("instance").close() }) }, close: function (n) { var t = $(n).dialog("instance"); t && t.close() }, center: function (n) { var t = $(n).dialog("instance"); t && t.option("position", { my: "center", at: "center", of: window }) }, fixScroll: function (n) { $(window).height() < $(n).parents(".ui-dialog").outerHeight() && ($(n).parents(".ui-dialog").addClass("ui-dialog-scroll"), $("html").addClass("fix-dialog-scroll-helper").css("margin-right", Sana.Utils.getScrollbarSize())) } }; QuickOrder = { viewModel: new QuickOrderViewModel, init: function () { Sana.UI.Autocomplete.init({ options: { selector: 'input[name="productInput"]' }, mapping: function (n, t) { var i = Sana.Utils.highlightWords(n.Name, t); return { label: i, originalLabel: n.Name, value: n.Value } }, onItemSelect: function (n, t) { QuickOrder.viewModel.request(t.item.originalLabel); QuickOrder.viewModel.searchProduct(); n.preventDefault() } }); $('input[name="productInput"]').bind("keyup", function (n) { n.keyCode == 13 && QuickOrder.viewModel.searchProduct() }) }, clearSelection: function () { QuickOrder.viewModel.product(null); QuickOrder.viewModel.request("") }, setFocus: function () { QuickOrder.viewModel.isInputActivated(!0); $("#quickOrder .tbx-search input").select() } }, function () { var n = document.getElementById("quickOrder"); n && ko.applyBindings(QuickOrder.viewModel, n) }(); $(function () { function n() { $("input[type=text].numeric").each(function () { var t = 0, i = 99999, r = 1, n = $(this); Sana.Layout.touch == !0 && n.attr("readonly", "true"); n.attr("min-value") && (t = Number(n.attr("min-value"))); n.attr("max-value") && (i = Number(n.attr("max-value"))); n.attr("data-step") && (r = n.attr("data-step")); n._spinner({ min: t, max: i, step: r, icons: { down: "icon-down", up: "icon-up" }, stop: function () { n.trigger("change") } }); n.keypress(function (n) { if (n.which != 46 && n.which != 8 && n.which != 0 && n.which != 13 && (n.which < 48 || n.which > 57)) return !1 }) }) } if ($.widget("ui._spinner", $.extend({}, $.ui.spinner.prototype, { _uiSpinnerHtml: function () { return "" }, _buttonHtml: function () { return "<a class='btn no-icon ui-spinner-button ui-spinner-up'><\/a><a class='btn no-icon ui-spinner-button ui-spinner-down'><\/a>" } })), $.ui._spinner.defaults = $.extend({}, $.ui.spinner.defaults), n(), $(document).ajaxSuccess(function () { n() }), Sana.Layout.touch == !0) { $(document).on("mouseenter", "input[type=text].numeric", function () { $(this).attr("readonly", !1); $(this).focus() }); $(document).on("blur", "input[type=text].numeric", function () { $(this).attr("readonly", !0) }) } }), function () { function n(n) { return n.substr(0, n.lastIndexOf(".") + 1) } function t(n, t) { return n.indexOf("*.") === 0 && (n = n.replace("*.", t)), n } jQuery.validator.defaults.ignore = ":disabled"; jQuery.validator.addMethod("multipleof", function (n, t, i) { if (!n || n == "") return i.empty; var r = parseFloat(n); return isNaN(r) ? !1 : n == 0 ? i.zero : Sana.Utils.isMultiple(r, i.value) }); jQuery.validator.unobtrusive.adapters.add("multipleof", ["value", "empty", "zero"], function (n) { var t = { value: parseFloat(n.params.value), zero: n.params.zero == "true", empty: n.params.empty == "true" }; n.rules.multipleof = t; n.message && (n.messages.multipleof = n.message) }); jQuery.validator.addMethod("mustnotmatch", function (n, t, i) { var r = jQuery("#" + i.otherpropertyid).val(); return n == r ? !1 : !0 }); jQuery.validator.unobtrusive.adapters.add("mustnotmatch", ["otherproperty"], function (i) { var r = n(i.element.name), u = t(i.params.otherproperty, r), f = $(i.form).find(":input[name=" + u + "]")[0], e = { otherpropertyid: f.id }; i.rules.mustnotmatch = e; i.message && (i.messages.mustnotmatch = i.message) }); jQuery.validator.addMethod("mustbetrue", function (n) { return n ? !0 : !1 }); jQuery.validator.unobtrusive.adapters.add("mustbetrue", [], function (n) { n.rules.mustbetrue = {}; n.message && (n.messages.mustbetrue = n.message) }); jQuery.validator.addMethod("greaterthantoday", function (n, t) { if (!n) return !0; var i = $(t).data("datepicker-options").dateFormat, r = $.datepicker.parseDate(i, n), u = (new Date).setHours(0, 0, 0, 0); return r >= u }); jQuery.validator.unobtrusive.adapters.add("greaterthantoday", [], function (n) { n.rules.greaterthantoday = {}; n.message && (n.messages.greaterthantoday = n.message) }); jQuery.validator.unobtrusive.adapters.add("zipcode", ["messages", "patterns"], function (i) { var e = JSON.parse(i.params.messages), o = JSON.parse(i.params.patterns), s = t("*.CountryId", n(i.element.name)), u = $(i.form).find(':input[name="' + s + '"]'), r, f = function () { var t = u.find("option:selected"), n = t.attr("value"); r = n && n.length ? t.attr("data-zipplus4") === "true" ? "plus4" : n.toLowerCase() : null }; u.on("change", function () { f(); var n = $(i.element); (n.hasClass("valid") || n.hasClass("input-validation-error")) && n.valid() }); f(); i.rules.regex = function () { return r ? o[r] : undefined }; i.messages.regex = function () { return r ? e[r] : undefined } }) }(); jQuery.validator.defaults.highlight = function () { var n = $.validator.defaults.highlight; return function (t, i, r) { n.call(this, t, i, r); $(t).parents(".form-row").removeClass("row-passed").addClass("row-error") } }(); jQuery.validator.defaults.unhighlight = function () { var n = $.validator.defaults.unhighlight; return function (t, i, r) { n.call(this, t, i, r); $(t).parents(".form-row").removeClass("row-error").addClass("row-passed") } }(); Zoom = { getSize: function (n) { var r = $("<img>").attr("src", n.attr("data-zoom-image"))[0].naturalWidth, u = $("<img>").attr("src", n.attr("data-zoom-image"))[0].naturalHeight, e = n.parents(".main").width() - n.parents(".details-img").width(), o = n.parents(".main").height(), f = 1, t, i, s, h; return r > e && (f = e / r), t = 1, u > o && (t = o / u), i = 1, i = f < t ? f : t, s = i * r, h = i * u, { placeholderWidth: s, placeholderHeight: h } }, init: function (n) { var i = !!n.attr("data-zoom-image"), t; if ($(".carousel-legend").toggleClass("invisible", !i), i) { if (t = n.data("elevateZoom"), t) { t.changeState("enable"); t.zoomContainer.show(); return } $("#zoomPlaceHolder").length || $('<div id="zoomPlaceHolder" style="position: absolute;"><\/div>').prependTo(".details-info"); n.elevateZoom({ zoomType: "inner", cursor: "crosshair", easing: !0 }) } }, disableAll: function (n) { for (var i, t = 0; t <= n.length; t++) i = n.eq(t).find("img").data("elevateZoom"), i && (i.changeState("disable"), i.zoomContainer.hide()) }, destroyAll: function (n) { for (var t = 0; t <= n.length; t++) n.eq(t).find("img").removeData("elevateZoom"); $(".zoomContainer").remove(); $(".zoomWindowContainer").remove(); $("#zoomPlaceHolder").remove() } }; window.ajax_loading = !1; $.hasAjaxRunning = function () { return window.ajax_loading }; $(document).ajaxStart(function () { window.ajax_loading = !0 }); $(document).ajaxStop(function () { window.ajax_loading = !1 }); isMobile = !1; (/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0, 4))) && (isMobile = !0); owl_flow = $(".flow-products ul"); owlFlow(); owl_flow.on("changed.owl.carousel", function () { }); jQuery(window).load(function () { jQuery(".E-Namad").length > 0 && jQuery(".E-Namad").attr("src", jQuery(".E-Namad").attr("data-src")); jQuery(".tooltip").tooltip() }); jQuery(document).ready(function (n) { function t() { n(".radio_hor input[type=radio]:checked").length > 0 && (n(".radio_hor input[type=radio]").closest(".radio").removeClass("active"), n(".radio_hor input[type=radio]:checked").closest(".radio").addClass("active")) } t(); n(".radio_hor label").click(function () { t() }); n(".owl_c").length > 0 && n(".owl_c").each(function (t, i) { var r = n(i).attr("data-item") ? n(".owl_c").attr("data-item") : 6, u = n(i).attr("data-item_mobile") ? n(".owl_c").attr("data-item_mobile") : 1, f = n(i).attr("data-item_tablet_mini") ? n(".owl_c").attr("data-item_tablet_mini") : 2, e = n(i).attr("data-item_tablet") ? n(".owl_c").attr("data-item_tablet") : 3, o = n(i).attr("data-item_margin") ? n(".owl_c").attr("data-item_margin") : 32, s = n(i).attr("data-loop") == "1" ? 1 : 0, h = n(i).attr("data-nav") == "1" ? 1 : 0, c = n(i).attr("data-play") == "1" ? 1 : 0, l = n(i).attr("data-playtime") ? n(i).attr("data-nav") : 1e3; n(i).owlCarousel({ items: r, margin: o, rtl: !0, loop: s, nav: h, autoplay: c, autoplayTimeout: l, navText: ["<i class='fa fa-angle-right'><\/i>", "<i class='fa fa-angle-left'><\/i>"], responsive: { 0: { slideBy: u, items: u }, 481: { slideBy: f, items: f }, 768: { slideBy: e, items: e }, 960: { slideBy: r, items: r } } }) }) }); jQuery(function (n) { var i, r, t; if (n(document).mouseup(function (t) { var i = n(".ribbon-header"); i.is(t.target) || i.has(t.target).length !== 0 || i.removeClass("nav-is-opened").addClass("nav-is-closed") }), n(".side_newsletter").length > 0 && (n(".column.newsletter").clone().appendTo(".side_newsletter"), n(".side_newsletter form").addClass("form_newsletter"), n(".form_newsletter>div").text(n(".side_newsletertitle").text())), n(".subscription_modal").length > 0 && (n(".newsletter form input[name=__RequestVerificationToken]").length > 0 && (i = n(".newsletter form input[name=__RequestVerificationToken]").clone(), n(".subscription_modal form").append(i)), n(".subscription_modal").delay(15e3).show(400)), r = n(".newsletter form input[name=__RequestVerificationToken]").clone(), n('<form action="https://www.modiseh.com/newsletter/subscribe" method="post"><input type="email" name="email" placeholder="Email شما"><button type="submit" class="male_button pbtn" name="gender" value="Male">مرد<i class="fa fa-angle-left"><\/i><\/button><button type="submit" class="female_button pbtn" name="gender" value="Female">زن<i class="fa fa-angle-left"><\/i><\/button><\/form>').appendTo(".subscription-wrap"), n(".subscription-wrap form").append(r), n(".subscription_modal .closeBox,.subscription_modal").click(function () { var t = new Date; t.setTime(t.getTime() + 6048e5); document.cookie = "subscription=437b930db84b8079c2dd804a71936b5f;expires=" + t.toUTCString() + ";path=/"; n(".subscription_modal").removeClass("active", function () { n(this).fadeOut() }) }), n(".modal_holder").click(function (n) { n.stopPropagation() }), n(".subscription_modal .subscription_form").submit(function () { var t = n(".newsletter form").attr("action"); n(this).attr({ action: t }); document.cookie = "subscription=437b930db84b8079c2dd804a71936b5f;expires=" + tdate.toUTCString() + ";path=/" }), n(".dark_layer").mouseenter(function () { n(this).removeClass("active") }), n(".nav-list>.nav-item:has(.nav-wrapper)").mouseenter(function () { n(".dark_layer").addClass("active") }).mouseleave(function () { n(".dark_layer").removeClass("active") }), n(".flexslider").length > 0 && n(".flexslider").flexslider(), n("#featured").length > 0) { t = n("#featured"); t.owlCarousel({ items: 1, slideBy: 1, rtl: !0, loop: !0, lazyLoad: !1, autoplay: !0, autoplayTimeout: 5e3, responsive: { 0: { slideBy: 1, items: 1 }, 481: { slideBy: 2, items: 2 }, 768: { slideBy: 3, items: 3 }, 960: { slideBy: 5, items: 5 } } }); t.on("changed.owl.carousel", function (t) { var i = t.item.index; i || (i = 2); n(this).find(".owl-dots").css({ top: n(this).find(".owl-item").eq(i).find("li>div:first-child").height(), visibility: "visible" }) }) } n(".title_separator .collapse_btn").length > 0 && n(".title_separator .collapse_btn").each(function (t, i) { var r = n(i).parent().next().height(); n(i).parent().next().height(r) }); n(".title_separator .collapse_btn").click(function () { n(this).toggleClass("collapse"); n(this).parent().next().toggleClass("collapse") }) }); $(window).load(function () { setTimeout(function () { if ($("body").hasClass("product-details-page") && $(window).width() > 992 && $(".zoomContainer").length > 0) { $(".carousel-image").append('<div class="zoom-caption" style="right:10px;top:10px"><i class="fa fa-search"><\/i><\/div>'); $(document).on("click", ".zoom-caption", function () { $(".carousel-image .carousel-content li.selected img").trigger("click") }) } }, 1500) }); jQuery(window).load(function () { extJs(); isMobile && (jQuery(window).width() > 640 && jQuery(window).width() < 767 && Sana.UI.RibbonHeader.initMobile(), jQuery(window).resize(function () { jQuery(window).width() > 640 && jQuery(window).width() < 767 && Sana.UI.RibbonHeader.initMobile() })) }); jQuery(function (n) { if (isMobile) { n(".ribbon-header .nav-main>ul>li.nav-item:has(.nav-wrapper)>a").on("click", function () { return n(this).parent().hasClass("lhover") ? (console.log("true"), !0) : (n(".ribbon-header .nav-main>ul>li.lhover.nav-item:has(.nav-wrapper)").removeClass("lhover"), n(this).parent().addClass("lhover"), console.log("false"), !1) }); n(".ribbon-header .nav-main>ul>li.nav-item:has(.nav-wrapper)>.nav-head-mob a").on("click", function () { return n(this).parent().hasClass("lhover") ? (console.log("true"), !0) : (n(".ribbon-header .nav-main>ul>li.lhover.nav-item:has(.nav-wrapper)").removeClass("lhover"), n(this).parent().addClass("lhover"), console.log("false"), !1) }) } }); window.onload = function () { if ($(".sidebar-content .navMenu").length) { $("li.nav-item.selected").clone().appendTo(".sidebar-content .navMenu"); var n = $("nav-lvl-2 nav-lvl-3,.nav-lvl-2 .nav-more") } $(".owl-stage").each(function () { $(this).children(':not(".cloned")').length < 5 && $(this).parent().siblings(".owl-controls").hide() }) }; $(".popup").click(function () { var n = $(this).attr("data-id"); $(".popupWrapper").insertBefore("footer"); $(".popupWrapper[data-id=" + n + "]").fadeIn() }); $(".closeBox").click(function () { $(".popupWrapper").fadeOut() }); $(".sidebar_newsletter").length && ($(".newsletter>form").clone().appendTo(".sidebar_newsletter_footer"), $(".sidebar_newsletter_footer .btn").addClass("btn-small btn-brown")); var BasketDetails = { lastUpdateUrl: null, viewModel: new BasketViewModel, init: function () { Sana.UI.ActionLinks.AddToWishlisted.init(); $(document).on("updated", "#basketContent", function (n, t) { BasketDetails.lastUpdateUrl = t; BasketDetails.markLastRowInGroup(); Sana.UI.Tooltips.init(".shipping-cost") }); $(document).on("click", "#btnClearBasket", function (n) { n.preventDefault(); BasketDetails.clearBasket() }); $(document).on("click", "#btnCancelBasket", function (n) { n.preventDefault(); BasketDetails.cancelBasket() }); $(document).on("click", ".hyp-update, .hyp-recalculate", function (n) { n.preventDefault(); BasketDetails.recalculateBasket() }); $(document).on("click", "#btnAddToWishlist", function (n) { n.preventDefault(); BasketDetails.addToWishlist($(this)) }); $(document).on("submit", "#promotionForm", function (n) { n.preventDefault(); BasketDetails.submitPromotion($(this)) }); $(document).on("click", ".hyp-discount", function () { $(this).next("#promotionForm").toggle().find("input").focus() }); $(document).on("keypress", "#basketContent .tbx-quantity", function (n) { n.which == 13 && (n.preventDefault(), BasketDetails.recalculateBasket()) }); $(document).on("click", "#basketContent .hyp-remove", function (n) { n.preventDefault(); BasketDetails.removeLines($(this)) }); $(document).on("click", ".btn-checkout", function (n) { n.preventDefault(); BasketDetails.goToCheckout($(this)); $(window).off("unload.updateBasket") }); Sana.UI.Tooltips.init(".shipping-cost"); this.initCheckoutOffers(); this.initQuickOrder(); this.initVariantsLayout(); BasketDetails.viewModel.checkLines(); $(window).on("unload.updateBasket", function () { BasketDetails.viewModel.isEmpty() || BasketDetails.updateBasket() }) }, recalculateBasket: function () { BasketDetails.viewModel.isEmpty() || BasketDetails.updateBasket({ callback: function (n) { n && BasketDetails.refreshBasket() } }) }, addToWishlist: function (n) { if (!BasketDetails.viewModel.isEmpty()) { var t = n.attr("data-src"); BasketDetails.updateBasket({ callback: function (n) { n && BasketDetails.refreshBasket(); $.post(t, { __RequestVerificationToken: $('input[name="__RequestVerificationToken"]:first').val() }, function () { Sana.UI.LoadingIndicator.hide(); Popup.open("#addToWishlistFeedbackPopup") }) } }) } }, submitPromotion: function (n) { if (!BasketDetails.viewModel.isEmpty()) { var t = n.attr("data-src"); BasketDetails.updateBasket({ callback: function () { var n = $("#txtPromotionCode").val(); Sana.UI.LoadingIndicator.show(); $.post(t, { code: n, __RequestVerificationToken: $('input[name="__RequestVerificationToken"]:first').val() }, function () { BasketDetails.refreshBasket() }) } }) } }, removeLines: function (n) { var t = n.attr("data-product"), i = n.attr("data-variant"), r = n.attr("data-prepack"), u = n.attr("data-uom"); BasketDetails.updateBasket({ callback: function () { $.post(n.attr("data-src"), { productId: t, variationId: i, prepackId: r, unitOfMeasureId: u, __RequestVerificationToken: $('input[name="__RequestVerificationToken"]:first').val() }, function () { BasketDetails.refreshBasket() }) } }) }, clearBasket: function () { if (!BasketDetails.viewModel.isEmpty()) { BasketDetails.lastUpdateUrl = null; var n = $("#btnClearBasket").attr("href"); Sana.UI.LoadingIndicator.show(); $.post(n, { __RequestVerificationToken: $('input[name="__RequestVerificationToken"]:first').val() }, function () { QuickOrder.clearSelection(); BasketDetails.refreshBasket() }) } }, cancelBasket: function () { BasketDetails.lastUpdateUrl = null; var n = $("#btnCancelBasket").attr("href"); Sana.UI.LoadingIndicator.show(); $.post(n, { __RequestVerificationToken: $('input[name="__RequestVerificationToken"]:first').val() }, function () { BasketDetails.refreshBasket() }) }, goToCheckout: function (n) { BasketDetails.updateBasket({ callback: function () { window.location.href = n.attr("href") } }) }, updateBasket: function (n) { var t = $("#basket"), i; if (t.valid()) { if (i = t.serialize(), !i) { n.callback && n.callback(); return } Sana.UI.LoadingIndicator.showAfter(400); $.ajax({ url: t.attr("action"), data: i + "&save=true", type: "POST", success: function (t) { Sana.UI.LoadingIndicator.hide(); n.callback && n.callback(t); $(".msg-basket-recalculate").slideUp(); $(".msg-block-error").remove() } }) } }, refreshBasket: function () { var n = $("#basketContent"); url = BasketDetails.lastUpdateUrl || n.attr("data-src"); Sana.UI.LoadingIndicator.show(); $.post(url, function (t) { var i = $($.parseHTML(t.trim())).filter("#basketContent"); n.replaceWith(i); jQuery.validator.unobtrusive.parse(n); Sana.UI.LoadingIndicator.hide(); Sana.Utils.refreshFormValidation("#basket"); BasketDetails.markLastRowInGroup(); Sana.UI.Tooltips.init(".shipping-cost"); BasketDetails.viewModel.checkLines(); $(".msg-basket-updated").slideToggle().delay(2500).slideToggle() }) }, initCheckoutOffers: function () { $("#checkoutofferings").find("form").each(function () { $(this).attr("data-ajax-begin", "Sana.UI.LoadingIndicator.show();"); $(this).attr("data-ajax-success", "BasketDetails.refreshBasket") }) }, initQuickOrder: function () { var n = document.getElementById("quickOrder"); n && QuickOrder.init(n); $(QuickOrder).on("addQuickOrderLine", function (n, t) { var r = $("#basket tbody:first"), i = $("#basket"); i.valid() && (BasketDetails.viewModel.quickOrderLine(t), Sana.UI.LoadingIndicator.show(), $.ajax({ url: i.attr("action"), data: BasketDetails.viewModel.getDataToSent(i) + "&save=false", type: "POST", success: function (n) { r.html(n); BasketDetails.markLastRowInGroup(); BasketDetails.viewModel.checkLines(); $(".msg-basket-recalculate").slideDown(); $(".list-totals .total-value, .gvi-basket .cell-total-value, .gvi-basket .cell-price-value").text("-"); Sana.Utils.refreshFormValidation("#basket"); QuickOrder.setFocus(); $(".msg-block-error").remove(); Sana.UI.LoadingIndicator.hide() } })) }) }, markLastRowInGroup: function () { $(".header-row").each(function (n, t) { $(t).nextUntil(".upper-row").last().addClass("last-in-group") }) }, initVariantsLayout: function () { $(document).on("click", ".btn-show-hide", function () { $(this).parents(".upper-row").find(".btn-show-hide").toggleClass("expanded collapsed"); $(this).parents(".upper-row").toggleClass("row-expanded row-collapsed").nextUntil(".upper-row").stop(!0, !0).fadeToggle(200) }); BasketDetails.markLastRowInGroup() } }, OrderTemplatePopup = { id: "#saveOrderTemplatePopup", init: function () { $(document).on("click", "#btnSaveOrderTemplate", function (n) { if (n.preventDefault(), !BasketDetails.viewModel.isEmpty()) { var t = $(this).attr("data-src"); BasketDetails.updateBasket({ callback: function (n) { n && BasketDetails.refreshBasket(); OrderTemplatePopup.open(t) } }) } }) }, open: function (n) { Sana.UI.LoadingIndicator.hide(); var t = $("#saveOrderTemplateBody"); $.get(n, function (n) { t.html(n); Popup.open(OrderTemplatePopup.id); t.find("input[type=text]:first-child").focus(); Sana.Utils.setValidation(t.parents("form:first")).validate() }) }, close: function () { $(OrderTemplatePopup.id).dialog("close") } }, OrderTemplateFeedBackPopup = { open: function (n) { Sana.UI.LoadingIndicator.hide(); parseInt(n) == 1 && (OrderTemplatePopup.close(), Popup.open("#saveOrderTemplateFeedbackPopup")) }, beginSave: function () { Sana.UI.LoadingIndicator.show() } }; $(function () { var t = document.getElementById("basketPage"), n; t && (BasketDetails.init(), OrderTemplatePopup.init(), n = document.getElementById("basketContent"), n) && ko.applyBindings(BasketDetails.viewModel, n) }), function () { function r() { var t = this; t.shipToCustomAddress = ko.observable(n); t.shipToCustomAddress.subscribe(function (n) { $("#customShippingAddress :input").prop("disabled", !n); $("[name$=CountryId]").trigger("change") }) } var t = document.getElementById("orderAdressPage"), n, i; t && (n = $("#ShipToCustomAddress").prop("checked"), $("#ShipToCustomAddress").change(function () { $("#orderAdressPage .radio_hor").toggleClass("disabled").find(":input").prop("disabled", function (n, t) { return !t }) }), n ? $("#orderAdressPage .radio_hor").addClass("disabled").find(":input").prop("disabled", !0) : ($("#orderAdressPage .radio_hor").removeClass("disabled").find(":input").prop("disabled", !1), $("#customShippingAddress :input").prop("disabled", !0)), i = new r, ko.applyBindings(i, t)) }(); OrderDetails = { init: function () { var n = $(".gvi-order-lines"), t = $(".show-hide-mode"); if (!t.length) { n.resTables(); return } t.show(); n.toggleClass("expanded collapsed"); $(document).on("click", ".toggle-hyp-inside .hyp", function () { n.toggleClass("expanded collapsed") }); $(document).on("click", "#btnLoadOrderLines", function (t) { t.preventDefault(); var i = $(this).attr("href"); i && (Sana.UI.LoadingIndicator.show(), $.ajax({ url: i, cache: !1, success: function (t) { n.html(t).resTables().toggleClass("expanded collapsed").find("tfoot").show(); $("#btnLoadOrderLines").hide(); $(".toggle-hyp-inside").show(); Sana.UI.LoadingIndicator.hide() } })) }) } }; $(function () { var n = document.getElementById("orderHistoryDetailPage"); n && OrderDetails.init() }), function () { function r(n) { this.OrderId = n.OrderId; this.DocumentId = n.DocumentId; this.DocumentDate = n.DocumentDate; this.BillToName = n.BillToName; this.ShipToName = n.ShipToName; this.DocumentType = n.DocumentType; this.DocumentTypeTitle = n.DocumentTypeTitle; this.TotalAmount = n.TotalAmount; this.OutstandingAmount = n.OutstandingAmount; this.Status = n.Status; this.IsPending = n.IsPending; this.Url = n.Url; this.ShippingTrackingText = n.ShippingTrackingText; this.ShippingTrackingUrl = n.ShippingTrackingUrl } function u() { var n = this, t; n.loaded = ko.observable(!1); n.loading = ko.observable(!1); t = function (t) { n.loading(!0); Sana.UI.LoadingIndicator.show(); var u = n.filter.toJSON(); u.__RequestVerificationToken = $('input[name="__RequestVerificationToken"]:first').val(); $.post(document.location.href, u, function (f) { var e = ko.utils.arrayMap(f.Items, function (n) { return new r(n) }); t(e); n.loaded(!0); n.hasMore(n.orders().length < f.TotalCount); n.hiddenColumns(i[u.DocumentType] || []); n.loading(!1); Sana.UI.LoadingIndicator.hide() }); n.filter.page++ }; n.orders = ko.observableArray([]); n.empty = ko.computed(function () { return n.orders().length == 0 }); n.filter = { page: 0, OrderId: ko.observable(), DocumentId: ko.observable(), DocumentType: ko.observable(), StartDate: ko.observable(), EndDate: ko.observable(), toJSON: function () { return { page: this.page, OrderId: this.OrderId, DocumentId: this.DocumentId, DocumentType: this.DocumentType(), StartDate: this.StartDate, EndDate: this.EndDate } } }; n.isChildDocumentType = ko.computed(function () { var t = n.filter.DocumentType(); return t != "Order" && t != "Quote" }); n.hiddenColumns = ko.observableArray([]); n.hasMore = ko.observable(!1); n.search = function () { n.filter.page = 0; t(function (t) { n.orders(t) }) }; n.loadMore = function () { t(function (t) { $.each(t, function () { n.orders.push(this) }) }) }; n.columnVisible = function (t) { return n.hiddenColumns.indexOf(t) < 0 } } var t = document.getElementById("orderHistoryPage"), i, n; t && (i = { Order: ["DocumentId", "ShipToName", "OutstandingAmount"], Quote: ["DocumentId", "ShipToName", "OutstandingAmount", "Status"], Invoice: ["ShipToName", "Status"], Shipment: ["TotalAmount", "OutstandingAmount", "Status"], ReturnReceipt: ["TotalAmount", "OutstandingAmount", "Status"], CreditNote: ["ShipToName", "Status"] }, n = new u, $(function () { n.filter.OrderId($('#orderHistoryPage input[name="filter.OrderId"]').val()); n.filter.DocumentId($('#orderHistoryPage input[name="filter.DocumentId"]').val()); n.filter.StartDate($('#orderHistoryPage input[name="filter.StartDate"]').val()); n.filter.EndDate($('#orderHistoryPage input[name="filter.EndDate"]').val()); ko.applyBindings(n, t); n.search(); $(".gvi-orders").resTables() })) }(), function () { function i() { var n = this, t = $("#chbAgreeTerms").prop("checked"); n.isChecked = ko.observable(t); n.showValidation = ko.observable(!1); n.isChecked.subscribe(function () { n.isChecked() && n.showValidation(!1) }); n.pay = function () { return n.isChecked() ? $("#orderOverviewForm").valid() ? (Sana.UI.LoadingIndicator.show(), !0) : !1 : (n.showValidation(!0), !1) }; n.openTerms = function () { Popup.open("#termsPopup") } } var n = document.getElementById("submitOrderPage"), t; if (n) { $(document).on("click", ".toggle-hyp-inside .hyp", function () { var n = $(".gvi-big-basket"), t = n.find("tbody:first"), i; if (t.children("tr").length == 0) { Sana.UI.LoadingIndicator.show(); i = n.attr("data-src"); $.post(i, function (i) { t.html(i); Sana.UI.LoadingIndicator.hide(); n.toggleClass("expanded collapsed") }); return } n.toggleClass("expanded collapsed") }); $(".shipping-cost").removeAttr("title").find(".tooltip-sign").remove(); t = new i; ko.applyBindings(t, n) } }(), function () { function i() { var n = this, i = $(".gvi-order-templates").data("open-action"), t; n.checkedValues = ko.observableArray([]); n.showValidation = ko.observable(!1); n.anyIsChecked = ko.computed(function () { return n.checkedValues().length > 0 }); n.checkedValues.subscribe(function () { n.showValidation(!1) }); t = function (t) { if (!n.anyIsChecked()) { n.showValidation(!0); return } var i = $("#orderTemplatesPage form"), r = i.serializeArray(); r.push({ name: "__RequestVerificationToken", value: $('input[name="__RequestVerificationToken"]:first').val() }); t || (t = i.attr("action")); Sana.UI.LoadingIndicator.show(); $.ajax({ url: t, type: "post", data: r, success: function (n) { Sana.UI.LoadingIndicator.hide(); $("#messagesPopup").html(n); Popup.open("#messagesPopup") } }) }; n.submit = function () { t() }; n.remove = function (n, i) { t($(i.target).attr("data-action")) }; n.openTemplate = function (n, t) { Sana.UI.LoadingIndicator.show(); var u = $(t.target), r = $("#detailsPopup"); r.load(i, { templateId: u.attr("data-id") }, function () { Sana.UI.LoadingIndicator.hide(); Popup.open(r) }) } } var n = document.getElementById("orderTemplatesPage"), t; n && (t = new i, ko.applyBindings(t, n)) }(), function () { var n = $("#paymentPage"), t; n.length != 0 && (t = $("#totalPrice", n), $('input[name="MethodId"]', n).change(function () { var n = $(this).data("total-amount"); t.text(n) })) }(); $(function () { var n = document.getElementById("orderPaymentPage"); n && (Sana.UI.Tooltips.init(".checkout-text"), $("#orderPaymentPage form").submit(function () { return $(this).valid() ? (Sana.UI.LoadingIndicator.show(), $(".btn-checkout").addClass("btn-disabled"), !0) : !1 })) }); ProductDetails = { init: function () { this.carousel.init(); this.dropdowns.init(); this.matrix.init(); this.prepacks.init(); Sana.UI.tabsSliderHorizontal.init(); Sana.UI.ActionLinks.AddToWishlist.init(); this.initUom(); this.lightboxImageSlider.init(); $(document).on("click", ".hyp-volume-prices", function (n) { n.preventDefault(); Sana.UI.LoadingIndicator.show(); var t = $(this), i = t.attr("href"), r = t.attr("data-productid"); $.post(i, { productId: r }, function (n) { $("#volumePricesPopup").html(n); Popup.open("#volumePricesPopup"); Sana.UI.LoadingIndicator.hide() }) }); $(document).on("click", ".hyp-bom", function () { Popup.open("#bomPopup") }); Sana.UI.LoadMore.init(".list-reviews", function (n) { $(n).find("input.star").rating() }) }, initUom: function () { var n = window.location.href; if ($(".order-box").length) $(document).on("change", "select[name=unitOfMeasureId]", function () { var t = $(this); ProductDetails.dropdowns.rememberSelection(); Sana.UI.LoadingIndicator.show(); $.ajax(n, { type: "POST", data: { unitOfMeasureId: t.val() } }).done(function (n) { Sana.Utils.replaceElements(n); ProductDetails.dropdowns.init(); Sana.UI.Selects.init(); Sana.UI.LoadingIndicator.hide() }) }) }, carousel: { selector: ".details-img", selectorForMobile: ".no-aside>.carousel-image", selectorForTablet: ".no-aside>.carousel-image", init: function () { Sana.Layout.addFunction(function () { ProductDetails.carousel.desktopCarousel() }, "DESKTOP"); Sana.Layout.addFunction(function () { ProductDetails.carousel.tabletCarousel() }, "TABLET"); Sana.Layout.addFunction(function () { ProductDetails.carousel.mobileCarousel() }, "MOBILE") }, desktopCarousel: function () { Zoom.destroyAll($(".carousel-content").children()); $(ProductDetails.carousel.selectorForMobile).remove(); var n = $("#productPage").find(".has-aside").length ? 2 : 4; $(ProductDetails.carousel.selector).scCarousel({ visibleCount: n }) }, tabletCarousel: function () { var n = ProductDetails.carousel.selectorForTablet, u = ProductDetails.carousel.selectorForMobile, t, r, i; if ($(u).remove(), $(n).length < 1) { if (Zoom.destroyAll($(".carousel-content").children()), $(".carousel-image").clone().insertBefore(".details-info").find(".carousel-content").removeAttr("style"), !$(".carousel-content").length) return; t = $(n).parent().width(); $(n).addClass("touchcarousel").css({ width: t, height: "auto" }).children().addClass("touchcarousel-container").children(":not(.empty-column)").addClass("touchcarousel-item").css({ width: t }); r = $(n).touchCarousel({ pagingNav: !0, scrollbar: !1, directionNavAutoHide: !1, itemsPerMove: 1, loopItems: !0, directionNav: !1, autoplay: !1, autoplayDelay: 2e3, transitionSpeed: 400 }).data("touchCarousel"); i = 0; $(ProductDetails.carousel.selector).data("scCarousel") && (i = $(ProductDetails.carousel.selector).scCarousel("getCurrentId")); $(ProductDetails.carousel.selector).find("ul").width(parseInt($(ProductDetails.carousel.selector).width()) + 1); r.goTo(i) } }, mobileCarousel: function () { var n = ProductDetails.carousel.selectorForMobile, u = ProductDetails.carousel.selectorForTablet, t, r, i; if ($(u).remove(), $(n).length < 1) { if (Zoom.destroyAll($(".carousel-content").children()), $(".carousel-image").clone().insertBefore(".details-info").find(".carousel-content").removeAttr("style"), !$(".carousel-content").length) return; t = $(n).parent().width(); $(n).addClass("touchcarousel").css({ width: t, height: "auto" }).children().addClass("touchcarousel-container").children(":not(.empty-column)").addClass("touchcarousel-item").css({ width: t }); r = $(n).touchCarousel({ pagingNav: !0, scrollbar: !1, directionNavAutoHide: !1, itemsPerMove: 1, loopItems: !0, directionNav: !1, autoplay: !1, autoplayDelay: 2e3, transitionSpeed: 400 }).data("touchCarousel"); i = 0; $(ProductDetails.carousel.selector).data("scCarousel") && (i = $(ProductDetails.carousel.selector).scCarousel("getCurrentId")); $(ProductDetails.carousel.selector).find("ul").width(parseInt($(ProductDetails.carousel.selector).width()) + 1); r.goTo(i) } }, selectImageByTags: function (n) { var t; $(".carousel-item").each(function () { var i = $(this); $.each(n, function () { if (this.toLowerCase() == i.attr("data-image-tag").toLowerCase()) return t = i.index(), !1 }) }); Sana.Layout.layout == "MOBILE" ? $(ProductDetails.carousel.selectorForMobile).data("touchCarousel").goTo(t) : $(ProductDetails.carousel.selector).scCarousel("goTo", t) }, getCurrentIndex: function () { var n; return n = Sana.Layout.layout == "MOBILE" ? $(ProductDetails.carousel.selectorForMobile).data("touchCarousel").getCurrentId() : $(ProductDetails.carousel.selector).scCarousel("getCurrentId"), n || 0 } }, lightboxImageSlider: { slider: null, init: function () { var n = document.getElementById("lightboxSlider"); n && (Sana.Layout.addFunction(function () { ProductDetails.lightboxImageSlider.slider && (Popup.close("#lightboxPopup"), ProductDetails.lightboxImageSlider._openingOnOff(!1)) }, "MOBILE"), Sana.Layout.addFunction(function () { ProductDetails.lightboxImageSlider._create() }, "TABLET"), Sana.Layout.addFunction(function () { ProductDetails.lightboxImageSlider._create() }, "DESKTOP")) }, _create: function () { if (ProductDetails.lightboxImageSlider._openingOnOff(!1), ProductDetails.lightboxImageSlider._openingOnOff(!0), !ProductDetails.lightboxImageSlider.slider) { var n = { $ArrowNavigatorOptions: { $Class: $JssorArrowNavigator$, $ChanceToShow: 2, $AutoCenter: 2 }, $BulletNavigatorOptions: { $Class: $JssorBulletNavigator$, $ChanceToShow: 2, $AutoCenter: 1, $SpacingX: 20, $SpacingY: 20 } }; ProductDetails.lightboxImageSlider.slider = new $JssorSlider$("lightboxSlider", n); ProductDetails.lightboxImageSlider._responsiveOn() } }, _openingOnOff: function (n) { if (!n) { $(".hyp-lightbox, .carousel-image").off("click.lightbox"); return } var t = function () { var t = $(".carousel-item").eq(ProductDetails.carousel.getCurrentIndex()).find("img").attr("data-zoom-image"), n = $(ProductDetails.lightboxImageSlider.slider.$Elmt).find('[src="' + t + '"]').parent().index(); n != -1 && (Popup.open("#lightboxPopup", { dialogClass: "lightbox-popup" }), ProductDetails.lightboxImageSlider._scaleSlider(), ProductDetails.lightboxImageSlider.slider.$GoTo(n)) }; $(".hyp-lightbox, .carousel-image").on("click.lightbox", function () { t() }) }, _scaleSlider: function () { var n = $("#lightboxSlider").parent().width(); n == 0 && (n = $(".lightbox-popup").addClass("hidden").show().width(), $(".lightbox-popup").hide().removeClass("hidden")); n && ProductDetails.lightboxImageSlider.slider ? (ProductDetails.lightboxImageSlider.slider.$ScaleWidth(n), Popup.center("#lightboxPopup")) : window.setTimeout(ProductDetails.lightboxImageSlider._scaleSlider, 30) }, _responsiveOn: function () { ProductDetails.lightboxImageSlider._scaleSlider(); $(window).bind("load", ProductDetails.lightboxImageSlider._scaleSlider); $(window).bind("resize", ProductDetails.lightboxImageSlider._scaleSlider); $(window).bind("orientationchange", ProductDetails.lightboxImageSlider._scaleSlider) } }, dropdowns: { _selectedComponents: null, _rootSelector: ".product", _getComponentDropdowns: function () { return $(".order-box .ddlb-component select", this._rootSelector) }, init: function () { var r = this._getComponentDropdowns(), t, i, n; if (r.size() == 0) { ProductDetails.filterRetailOffers(null); return } t = this._selectedComponents; t == null && (i = Sana.Utils.getQueryVariable("v"), i && (t = i.split(","))); n = null; r.each(function (i) { var r = $(this); n != null && r.dependent_on(n); t && r.val(t[i]); n = r }); ProductDetails.dropdowns.update(n); n.change(function () { ProductDetails.dropdowns.update($(this)) }) }, rememberSelection: function () { this._selectedComponents = this._getComponentDropdowns().map(function () { return $(this).val() }) }, update: function (n) { var t = n.find("option:selected"); ProductDetails.dropdowns.updatePrice(t.attr("data-price"), t.attr("data-listprice")); ProductDetails.dropdowns.updateInventory(t.attr("data-inventory")); ProductDetails.carousel.selectImageByTags((t.attr("data-image-tags") || "").split(" ")); ProductDetails.filterRetailOffers(t.attr("value")) }, updateInventory: function (n) { var t = parseFloat(n); $(".stock-row", this._rootSelector).each(function () { var n = $(this), r = parseFloat(n.attr("data-min")), u = parseFloat(n.attr("data-max")), i = t <= r || t > u; n.toggleClass("hide", i); i || n.find(".stock-amount").text(t) }) }, updatePrice: function (n, t) { $(".main .lbl-price", this._rootSelector).text(n); var i = t && n != t; $(".main .list-price", this._rootSelector).toggleClass("hide", !i).html(i ? t : "&nbsp;"); Sana.UI.priceStyle(".order-box") }, onBeforeAddToBasket: function () { var t = $('.tbx-quantity input[name="quantity"]', this._rootSelector), n = parseFloat(t.val()); return !n || isNaN(n) ? !1 : Sana.UI.BasketSummary.onBeforeChange() } }, filterRetailOffers: function (n) { var t = $("#retailOffers"); $("div[data-variant]", t).each(function () { var t = $(this), i = t.attr("data-variant"); i == "" || i == n ? t.show() : t.parent().hide() }); t.show(); t.find("div:visible").length == 0 && t.hide() }, matrix: { init: function () { $(document).on("click", ".btn-matrix", function () { Popup.open("#matricesPopup", { dialogClass: "matrices" }) }); Matrix.init({ addToBasketMode: !0 }) } }, prepacks: { formSelector: "#prepacksForm", init: function () { var n = Sana.Utils.getQueryVariable("pack"); n && $(".ddlb-prepack-selector select").val(n); $("#verticalCode").change(function () { ProductDetails.prepacks.onVariantChange() }); $(this.formSelector + " input.numeric").change(function () { ProductDetails.prepacks.onQuantityChange() }); $(this.formSelector + " button[type='submit']").click(function (n) { ProductDetails.prepacks.onSubmit(n) }); this.updatePrices() }, validators: { selector: "#prepacksValidationMsg", check: function (n) { return n > 0 }, showMessage: function (n) { $(this.selector).toggleClass("hide", !n) } }, onVariantChange: function () { this.updatePrices() }, onQuantityChange: function () { this.updateTotalQuantity(); this.validators.showMessage(!$("#prepacksForm").valid()) }, onSubmit: function (n) { var t = this.calcTotalQuantity(); this.validators.check(t) ? Popup.close("#matricesPopup") : (this.validators.showMessage(!0), n.preventDefault()) }, onBasketChanged: function () { Sana.UI.BasketSummary.onChanged($("#prepackTotalCnt").html()); $(ProductDetails.prepacks.formSelector + " input.numeric").val(""); ProductDetails.prepacks.updateTotalQuantity() }, updatePrices: function () { var r = $("#verticalCode").val(), t = $(this.formSelector).find("table.gvi-prepacks tbody"), i = t.find("tr"), n; i.hide(); i.find(":input").prop("disabled", !0); n = t.find("tr[data-src='" + r + "']"); n.show(); n.find(":input").prop("disabled", !1); $(this.formSelector).find(".numeric").val("").change() }, updateTotalQuantity: function () { var n = $("#prepackTotalCnt"), t = n.parents(".prepacks-count"), i = this.calcTotalQuantity(); if (isNaN(i)) { t.hide(); return } n.html(i); t.show() }, calcTotalQuantity: function () { if (!$("#prepacksForm").valid()) return NaN; var n = 0; return $(this.formSelector + " input.numeric").each(function () { n += Number(this.value) }), n = Sana.Utils.roundQuantity(n) } } }; $(function () { var n = document.getElementById("productPage"); n && ProductDetails.init() }); ProductListPage = function () { var n = {}; return n.init = function () { Sana.UI.priceStyle(".product-list"); Sana.UI.Sorting.init(); Sana.UI.Facets.init(); Sana.UI.LoadMore.init(".product-list", n.refreshLines); setFacH(); infiniteScroll(); n.initOrderMode(); Sana.Layout.addFunction(function () { n.mobileLayout(); $(document).on("click", ".filter-title", function () { setFacH() }) }, "MOBILE"); Sana.Layout.addFunction(function () { $(".filters-wrapper").prependTo(".column-facets"); $(".facets").show() }, "TABLET"); Sana.Layout.addFunction(function () { $(".filters-wrapper").prependTo(".column-facets"); $(".facets").show() }, "DESKTOP"); location.hash.length > 0 && setTimeout(function () { var n = '[data-scroll-to="' + location.hash.substr(1) + '"]'; Sana.UI.scrollToNode(n) }, 500) }, n.refreshLines = function (n) { Sana.UI.Selects.init(); Sana.UI.priceStyle(n) }, n.initOrderMode = function () { var t = $("#btnQuickOrderTop, #btnQuickOrderBottom"); if (t.length != 0) { t.click(function () { n._submitData() }); $(".form-quantity").keydown(function (t) { if (t.which == 13) return n._submitData(), !1 }); $(Sana.UI.Sorting).off("beforeChange").on("beforeChange", function (t, i) { n._getLines().length > 0 ? (Sana.UI.SelectionLost.open(i), Sana.UI.Sorting.undo()) : Sana.UI.Sorting.resolve() }); $(Sana.UI.Facets).off("beforeChange").on("beforeChange", function (t, i) { if (n._getLines().length > 0) return Sana.UI.SelectionLost.open(i), !1; Sana.UI.Facets.resolve() }); $(document).on("change", ".product-list > li select[name=unitOfMeasureId]", function () { n._onUnitOfMeasureChanged($(this)) }); Sana.UI.SelectionLost.init(); $(Sana.UI.SelectionLost).on("beforeChange", function (t, i) { n._addToBasket(i, null, function () { Sana.UI.SelectionLost.resolve() }) }); $(document).off("click", ".edit-selected").on("click", ".edit-selected", function () { $(this).closest("form").submit() }) } }, n.getVariants = function (n) { var t = n.val(); return t != "" && typeof t != "undefined" ? $.evalJSON(t) : null }, n._submitData = function () { if (Sana.Utils.validate($(".form-quantity"))) { var t = $("#btnQuickOrderTop").attr("data-src"); n._addToBasket(t, function () { Sana.UI.BasketSummary.onBeforeChange() }, function (n) { Sana.UI.BasketSummary.onChanged(n) }) } }, n._addToBasket = function (t, i, r) { var u = n._getLines(); u.length > 0 && $.ajax({ url: t, type: "post", data: $.toJSON(u), contentType: "application/json", beforeSend: function () { i && i() }, success: function (t) { n._clearSelection(); r && r(t) } }) }, n._getLines = function () { var t = $(".product-list > li"); return $.map(t, function (t) { var r = $(t).attr("data-id"), u = $(t).find("input[name^=product_quantity]").val(), f = $(t).find("select[name=unitOfMeasureId]").val(), i = Number(u); return i > 0 ? { productId: r, variantId: "", quantity: i, unitOfMeasureId: f } : n.getVariants($(t).find("input[name=variants]")) }) }, n._clearSelection = function () { var n = $(".product-list"); n.find("input[name=variants]").val(""); n.find("input[name=product_quantity]").val(""); n.children().removeClass("variants-selected") }, n._onUnitOfMeasureChanged = function (t) { var i = t.parents(".product-list > li"), r = t.val(), u = i.attr("data-id"); Sana.UI.LoadingIndicator.show(); $.ajax({ url: window.location.href, type: "post", data: { unitOfMeasureId: r, productId: u }, success: function (t) { $newRow = $(t.trim()); i.replaceWith($newRow); $.validator.unobtrusive.parse($newRow); n.refreshLines(); Sana.UI.LoadingIndicator.hide() } }) }, n.variantsPopup = { open: function (n) { Popup.open("#variantMatrixPopup"); Sana.UI.LoadingIndicator.hide(); Matrix.init({ addToBasketMode: !1, currentPrductId: n }) } }, n.mobileLayout = function () { $(".filters-wrapper").insertAfter("header"); Sana.UI.Toggler.init(".filter-title") }, n }(); $(function () { var n = document.getElementById("productListPage"), t = document.getElementById("searchPage"); (n || t) && ProductListPage.init() }); MyAccount = { init: function () { $(".gvi-orders").resTables() } }; $(function () { var n = document.getElementById("myAccountPage"); n && MyAccount.init() }), function () { function i(n) { this.Id = n.Id; this.Name = n.Name; this.Address = n.Address } function r() { var n = this, t = 0, r; n.loading = ko.observable(!1); r = function (r) { Sana.UI.LoadingIndicator.showAfter(1e3); n.loading(!0); $.post(Sana.Urls.Home() + "profile/representablecustomers", { keywords: n.keywords(), page: t, __RequestVerificationToken: $('input[name="__RequestVerificationToken"]:first').val() }, function (t) { var u = ko.utils.arrayMap(t.Items, function (n) { return new i(n) }); r(u); n.hasMore(n.customers().length < t.TotalCount); n.loading(!1); Sana.UI.LoadingIndicator.hide() }); t++ }; n.customers = ko.observableArray([]); n.empty = ko.computed(function () { return n.customers().length == 0 }); n.keywords = ko.observable(); n.hasMore = ko.observable(!1); n.search = function () { t = 0; r(function (t) { n.customers(t) }) }; n.onkeydown = function (t, i) { return i.which === 27 ? (n.keywords(null), !1) : !0 }; n.loadMore = function () { r(function (t) { $.each(t, function () { n.customers.push(this) }) }) }; n.represent = function (n) { Sana.UI.LoadingIndicator.show(); $.post(Sana.Urls.Home() + "profile/impersonate", { accountId: n.Id, __RequestVerificationToken: $('input[name="__RequestVerificationToken"]:first').val() }, function () { Sana.Urls.RedirectBack() }) }; n.keywords.subscribe(Sana.Utils.debounce(function () { n.search() }, 300)) } var t = document.getElementById("representCustomerPage"), n; t && (n = new r, ko.applyBindings(n, t), n.search(), $(".gvi-represent").resTables()) }(); $(function () { var i = document.getElementById("tellafriendPreviewPage"); if (i) { var r = $("#previewContent").val(), t = document.getElementById("previewFrame"), n = t.document; t.contentDocument ? n = t.contentDocument : t.contentWindow && (n = t.contentWindow.document); n.open(); n.writeln(r); n.close(); $(n.body).find("a").each(function () { $(this).attr("target", "_blank") }); $("#tellAFriendForm").submit(function (n) { n.preventDefault(); Sana.UI.LoadingIndicator.show(); $.ajax({ type: "POST", url: $(this).attr("action"), data: $(this).serialize(), success: function (n) { $("#tellAFriendPopup").html(n); Sana.UI.LoadingIndicator.hide() }, error: function () { $("#tellAFriendPopup").html(data); Sana.UI.LoadingIndicator.hide() } }) }) } }), function () { function i() { var n = this, t = ".wishlist-details", i = function (i) { var r = i.attr("data-src"); Sana.UI.LoadingIndicator.show(); $.post(r, { productId: i.attr("data-product"), unitOfMeasureId: i.attr("data-uom"), variantId: i.attr("data-variant"), prepackId: i.attr("data-prepack"), __RequestVerificationToken: $('input[name="__RequestVerificationToken"]:first').val() }, function (i) { if (i != "") { Sana.UI.LoadingIndicator.hide(); return } $(t).load(window.location.href, function () { var i = $(t)[0]; ko.cleanNode(i); ko.applyBindings(n, i); Sana.UI.LoadingIndicator.hide() }) }) }; n.addToBasket = function (n, t) { var r = $(t.target).closest("button"); i(r) }; n.remove = function (n, t) { var r = $(t.target); i(r) } } var n = document.getElementById("wishListPage"), t; n && (t = new i, ko.applyBindings(t, n)) }(); $(function () { var t = document.getElementById("addreviewPage"), n; t && (n = $("#addReviewForm"), n.submit(function (t) { if (t.preventDefault(), !n.valid()) return !1; Sana.UI.LoadingIndicator.show(); $.ajax({ type: "POST", url: n.attr("action"), data: n.serialize(), success: function (n) { var t = $("#reviewAddedPopup").html(n).find(".btn-close-dialog"); Sana.UI.LoadingIndicator.hide(); Popup.open(".successPopup", { afterClose: function () { window.location.href = t.attr("href") } }) } }) })) }); !function (n, t, i) { function ot() { rt !== window.innerWidth && (rt = window.innerWidth, b()) } function st(n, t, i, r) { var f = parseInt(getComputedStyle(document.documentElement).fontSize, 10) / 16, e = parseInt(getComputedStyle(t).fontSize, 10) / 16 / f, o = r / t.scrollWidth, u = o * e; return 4 > u ? (n.style.fontSize = "", i.redraw(), !1) : (n.style.fontSize = u + "rem", n.setAttribute("data-scale-rounded", Math.round(u).toString()), i.redraw(), !0) } function y(n, t) { if (!u.isSlow()) { for (var f, r, a = window.getComputedStyle(n.parentNode), p = parseInt(a.getPropertyValue("padding-left"), 10), w = parseInt(a.getPropertyValue("padding-right"), 10), e = n.parentNode.clientWidth - p - w, h = n.getAttribute("data-scale-max"), y = n.getAttribute("data-scale-hide"), c = h ? v.indexOf(h) : gt, o = n.querySelectorAll(".soon-group-sub"), i = 0, l = o.length, s = n.querySelector(".soon-group") ; l > i; i++) o[i].style.display = ""; if ("fit" === h || "fill" === h) { if (st(n, s, t, e)) return; c = 0 } f = c; do n.setAttribute("data-scale", v[f]), f++; while (s.scrollWidth > e && v[f]); if (f !== c && t.redraw(), !(s.scrollWidth <= e || "none" === y)) { i = 0; r = !1; do { if ("0" !== o[i].getAttribute("data-value")) break; o[i].style.display = "none"; r = !0; i++ } while (s.scrollWidth > e && l > i); if (r && t.redraw(), "empty" !== y) { i = l - 1; r = !1; do o[i].style.display = "none", r = !0, i--; while (s.scrollWidth > e && i > 0); r && t.redraw() } } } } function b() { for (var n = h.length - 1; n >= 0; n--) y(h[n].node, h[n].presenter) } function k(n) { for (var t = 0, i = h.length; i > t; t++) if (h[t].node === n) return t; return null } function ht(n) { for (var t = 0, i = w.length; i > t; t++) if (w[t].node === n) return t; return null } function l(n) { var t = k(n); return null === t ? null : h[t] } function ct(n) { -1 === n.className.indexOf("soon") && (n.className += " soon"); u.supportsAnimation() || (n.className += " soon-no-animation"); var t = n.getAttribute("data-layout"); t && (-1 !== t.indexOf("group") || -1 !== t.indexOf("line")) || (t || (t = ""), n.setAttribute("data-layout", t + " group")); u.isSlow() && (n.removeAttribute("data-visual"), n.setAttribute("data-view", "text"), n.className += " soon-slow-browser") } function a(n, t, i) { t[i] && !n.getAttribute("data-" + i) && n.setAttribute("data-" + i, t[i]) } function f(n, t) { return n.getAttribute("data-" + t) } function lt(n, t) { var f = null !== n.due || null !== n.since, i = null, u; return f ? n.since ? (u = n.now ? n.now.valueOf() : (new Date).valueOf(), i = r.chain(function (t) { return n.now ? -t : t }, r.offset(u), r.diff(n.since.valueOf()), function (n) { return Math.abs(n) }, function (n) { return Math.max(0, n) }, function (t) { return n.callback.onTick(t, n.since), t }, r.event(function (n) { return 0 === n }, t), r.duration(new Date(u), n.since, n.format, n.cascade))) : i = r.chain(r.offset(n.now.valueOf()), r.diff(n.due.valueOf()), function (n) { return Math.max(0, n) }, function (t) { return n.callback.onTick(t, n.due), t }, r.event(function (n) { return 0 >= n }, t), r.duration(n.now, n.due, n.format, n.cascade)) : (i = function () { var n = new Date; return [n.getHours(), n.getMinutes(), n.getSeconds()] }, n.format = ["h", "m", "s"], n.separator = ":"), i } function at(n, t) { for (var i, s, h, f, e, u, c, v = null !== n.due || null !== n.since, y = lt(n, t), l = { type: "group", options: { transform: y, presenters: [] } }, a = [], p = n.format.length, o = 0; p > o; o++) u = n.format[o], c = o, i = { type: "group", options: { className: "soon-group-sub", presenters: [] } }, n.visual && (i.options.presenters.push(d(n, u)), n.reflect && i.options.presenters.push(d(n, u, "soon-reflection"))), s = { type: "text", options: { className: "soon-label" } }, s.options.transform = n.singular ? r.plural(n.label[u], n.label[u + "_s"]) : function (t) { return function () { return n.label[t + "_s"] } }(u), h = g(n, u), f = null, n.reflect && !n.visual && (f = g(n, u, "soon-reflection")), i.options.presenters.push(h), f && i.options.presenters.push(f), v && i.options.presenters.push(s), n.separator && (e = { type: "group", options: { className: "soon-group-separator", presenters: [i] } }, 0 !== c && (n.reflect && e.options.presenters.unshift({ type: "text", options: { className: "soon-separator soon-reflection", transform: function () { return n.separator } } }), e.options.presenters.unshift({ type: "text", options: { className: "soon-separator", transform: function () { return n.separator } } })), i = e), a.push(i); return l.options.presenters = a, l } function d(n, t, i) { var f = n.visual.split(" "), e = f[0]; return f.shift(), { type: e, options: { className: "soon-visual " + (i || ""), transform: r.chain(r.progress(u.MAX[t]), r.cap()), modifiers: f, animate: "ms" !== t } } } function g(n, t, i) { return n.chars ? { type: "repeater", options: { delay: "text" === n.view ? 0 : 50, className: "soon-value " + (i || ""), transform: r.chain(r.pad(n.padding[t]), r.chars()), presenter: { type: n.view } } } : { type: "group", options: { className: "soon-group-sub-sub soon-value " + (i || ""), transform: r.pad(n.padding[t]), presenters: [{ type: n.view }] } } } function vt(n, t, i, r) { h.push({ node: n, ticker: t, presenter: i, options: r }) } function nt(n) { return new (tt(n.type))(n.options || {}) } function tt(n) { return s[n.charAt(0).toUpperCase() + n.slice(1)] } function yt(n, t) { var i = n.getElementsByClassName ? n.getElementsByClassName("soon-placeholder") : n.querySelectorAll("soon-placeholder"), r; return i.length && (i[0].innerHTML = "", n = i[0]), r = nt(t), n.appendChild(r.getElement()), r } function pt(n, t, i, r) { var u = new dt(function (n) { t.setValue(n) }, { rate: i }); return vt(n, u, t, r), u.start(), y(n, t), u } function p(n) { var i, t, r = ["labels", "padding"], u = { since: f(n, "since"), due: f(n, "due"), now: f(n, "now"), face: f(n, "face"), visual: f(n, "visual"), format: f(n, "format"), singular: "true" === f(n, "singular"), reflect: "true" === f(n, "reflect"), scaleMax: f(n, "scale-max"), scaleHide: f(n, "scale-hide"), separateChars: !("false" === f(n, "separate-chars")), cascade: !("false" === f(n, "cascade")), separator: f(n, "separator"), padding: !("false" === f(n, "padding")), eventComplete: f(n, "event-complete"), eventTick: f(n, "event-tick") }; for (var o in c) if (c.hasOwnProperty(o)) for (i = c[o], t = 0; 2 > t; t++) u[r[t] + i.option] = f(n, r[t] + "-" + i.option.toLowerCase()); return e.create(n, u) } function wt(n) { var t, c, l, v, y; if (0 === n.indexOf("in ")) { var h = n.match(ut), o = parseInt(h[1], 10), s = h[2]; return t = new Date, -1 !== s.indexOf("hour") ? t.setHours(t.getHours() + o) : -1 !== s.indexOf("minute") ? t.setMinutes(t.getMinutes() + o) : -1 !== s.indexOf("second") && t.setSeconds(t.getSeconds() + o), t } if (-1 !== n.indexOf("at ")) { t = new Date; c = t.getTime(); l = -1 !== n.indexOf("reset"); n = n.replace("reset ", ""); var i = n.split("at "), r = i[1].match(ft), a = parseInt(r[1], 10), p = r[2] ? parseInt(r[2], 10) : 0, w = r[3] ? parseInt(r[3], 10) : 0, e = i[1].split(" zone "); (e && (e = e[1]), i[0].length) && (v = u.getDayIndex(i[0]), y = (v + 7 - t.getDay()) % 7, t.setDate(t.getDate() + y)); t.setHours(a); t.setMinutes(p); t.setSeconds(w); t.setMilliseconds(0); l && c >= t.getTime() && t.setHours(a + (i[0].length ? 168 : 24)); var f = u.pad, b = t.getFullYear() + "-" + f(t.getMonth() + 1) + "-" + f(t.getDate()), k = f(t.getHours()) + ":" + f(t.getMinutes()) + ":" + f(t.getSeconds()); n = b + "T" + k + (e || "") } return u.isoToDate(n) } function bt(n, t) { if (0 === t.indexOf(n) || "w" === n && -1 !== t.indexOf("M")) return ""; if ("d" === n) { if (-1 !== t.indexOf("w")) return ""; if (-1 !== t.indexOf("M")) return "00" } return null } function kt(n, t, i) { if (i && -1 !== it.indexOf(n)) return i; var r = function (i) { return function () { i(); e.destroy(n); e.create(n, t) } }(i); return it.push(n), r } var ut, ft, et; if (document.querySelectorAll && !n.Soon) { var e = {}, u = {}, s = {}, r = {}, o = { timer: 0, cbs: [], register: function (n) { o.cbs.push(n) }, deregister: function (n) { for (var t = o.cbs.length - 1; t >= 0; t--) o.cbs[t] === n && o.cbs.splice(t, 1) }, onresize: function () { clearTimeout(o.timer); o.timer = setTimeout(function () { o.resize() }, 100) }, resize: function () { for (var n = 0, t = o.cbs.length; t > n; n++) o.cbs[n]() }, init: function () { n.addEventListener && n.addEventListener("resize", o.onresize, !1) } }; o.init(); Function.prototype.bind || (Function.prototype.bind = function (n) { if ("function" != typeof this) throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable"); var r = Array.prototype.slice.call(arguments, 1), u = this, t = function () { }, i = function () { return u.apply(this instanceof t && n ? this : n, r.concat(Array.prototype.slice.call(arguments))) }; return t.prototype = this.prototype, i.prototype = new t, i }); Array.prototype.indexOf || (Array.prototype.indexOf = function (n, t) { var r, f, u, i; if (null == this) throw new TypeError('"this" is null or not defined'); if ((f = Object(this), u = f.length >>> 0, 0 === u) || (i = +t || 0, 1 / 0 === Math.abs(i) && (i = 0), i >= u)) return -1; for (r = Math.max(i >= 0 ? i : u - Math.abs(i), 0) ; u > r;) { if (r in f && f[r] === n) return r; r++ } return -1 }), function () { function n(n) { this.el = n; for (var r = n.className.replace(/^\s+|\s+$/g, "").split(/\s+/), t = 0; t < r.length; t++) i.call(this, r[t]) } function r(n, t, i) { Object.defineProperty ? Object.defineProperty(n, t, { get: i }) : n.__defineGetter__(t, i) } if (!("undefined" == typeof Element || "classList" in document.documentElement)) { var t = Array.prototype, i = t.push, u = t.splice, f = t.join; n.prototype = { add: function (n) { this.contains(n) || (i.call(this, n), this.el.className = this.toString()) }, contains: function (n) { return -1 != this.el.className.indexOf(n) }, item: function (n) { return this[n] || null }, remove: function (n) { if (this.contains(n)) { for (var t = 0; t < this.length && this[t] != n; t++); u.call(this, t, 1); this.el.className = this.toString() } }, toString: function () { return f.call(this, " ") }, toggle: function (n) { return this.contains(n) ? this.remove(n) : this.add(n), this.contains(n) } }; window.DOMTokenList = n; r(Element.prototype, "classList", function () { return new n(this) }) } }(), function () { for (var i = 0, t = ["webkit", "moz"], n = 0; n < t.length && !window.requestAnimationFrame; ++n) window.requestAnimationFrame = window[t[n] + "RequestAnimationFrame"], window.cancelAnimationFrame = window[t[n] + "CancelAnimationFrame"] || window[t[n] + "CancelRequestAnimationFrame"]; window.requestAnimationFrame || (window.requestAnimationFrame = function (n) { var t = (new Date).getTime(), r = Math.max(0, 16 - (t - i)), u = window.setTimeout(function () { n(t + r) }, r); return i = t + r, u }); window.cancelAnimationFrame || (window.cancelAnimationFrame = function (n) { clearTimeout(n) }) }(); u = function () { function l() { var t, n, u, r; if (!window.getComputedStyle) return !1; n = document.createElement("div"); u = { webkitTransform: "-webkit-transform", OTransform: "-o-transform", msTransform: "-ms-transform", MozTransform: "-moz-transform", transform: "transform" }; document.body.insertBefore(n, null); for (r in u) n.style[r] !== i && (n.style[r] = "translate3d(1px,1px,1px)", t = window.getComputedStyle(n).getPropertyValue(u[r])); return document.body.removeChild(n), t !== i && t.length > 0 && "none" !== t } function a() { var n = !1, e = "animation", o = "", r = "Webkit Moz O ms Khtml".split(" "), u = "", t = 0, f = document.body, s = r.length; if (f.style.animationName !== i && (n = !0), n === !1) for (; s > t; t++) if (f.style[r[t] + "AnimationName"] !== i) { u = r[t]; e = u + "Animation"; o = "-" + u.toLowerCase() + "-"; n = !0; break } return n } var t, n, v = function (n) { var t, r, i = /^(\d{4}\-\d\d\-\d\d([tT ][\d:\.]*)?)([zZ]|([+\-])(\d\d):(\d\d))?$/.exec(n) || [], u, f; if (i[1]) { for (t = i[1].split(/\D/), u = 0, f = t.length; f > u; u++) t[u] = parseInt(t[u], 10) || 0; return t[1] -= 1, t = new Date(Date.UTC.apply(Date, t)), t.getDate() ? (i[5] && (r = 60 * parseInt(i[5], 10), i[6] && (r += parseInt(i[6], 10)), "+" == i[4] && (r *= -1), r && t.setUTCMinutes(t.getUTCMinutes() + r)), t) : Number.NaN } return Number.NaN }, y = new Date("2015-01-01T12:00:00.123+01:00"), u = isNaN(y) ? function (n) { return v(n) } : function (n) { return new Date(n) }; "undefined" != typeof document.hidden ? (n = "hidden", t = "visibilitychange") : "undefined" != typeof document.mozHidden ? (n = "mozHidden", t = "mozvisibilitychange") : "undefined" != typeof document.msHidden ? (n = "msHidden", t = "msvisibilitychange") : "undefined" != typeof document.webkitHidden && (n = "webkitHidden", t = "webkitvisibilitychange"); var r = !1, f = 1, e = 1e3 * f, o = 60 * e, s = 60 * o, h = 24 * s, p = 7 * h, c = { MAX: { y: 100, M: 12, w: 52, d: 365, h: 24, m: 60, s: 60, ms: 1e3 }, AMOUNT: { w: p, d: h, h: s, m: o, s: e, ms: f }, NAMES: { y: "years", M: "months", w: "weeks", d: "days", h: "hours", m: "minutes", s: "seconds", ms: "milliseconds" }, FORMATS: ["y", "M", "w", "d", "h", "m", "s", "ms"], CIRC: 2 * Math.PI, QUART: .5 * Math.PI, DAYS: ["su", "mo", "tu", "we", "th", "fr", "sa"], setText: null, documentVisibilityEvent: t, pad: function (n) { return ("00" + n).slice(-2) }, getDayIndex: function (n) { return this.DAYS.indexOf(n.substr(0, 2)) }, isSlow: function () { return !("textContent" in document.body) }, supportsAnimation: function () { return r = a() && l(), c.supportsAnimation = function () { return r }, r }, toArray: function (n) { return Array.prototype.slice.call(n) }, toBoolean: function (n) { return "string" == typeof n ? "true" === n : n }, isoToDate: function (n) { if (n.match(/(Z)|([+\-][0-9]{2}:?[0-9]*$)/g)) return u(n); n += -1 !== n.indexOf("T") ? "Z" : ""; var t = u(n); return this.dateToLocal(t) }, dateToLocal: function (n) { return new Date(n.getTime() + 6e4 * n.getTimezoneOffset()) }, prefix: function () { for (var i, t = ["webkit", "Moz", "ms", "O"], n = 0, r = t.length, u = document.createElement("div").style; r > n; n++) if (i = t[n] + "Transform", i in u) return t[n]; return null }(), setTransform: function (n, t) { n.style[this.prefix + "Transform"] = t; n.style.transform = t }, setTransitionDelay: function (n, t) { n.style[this.prefix + "TransitionDelay"] = t + "," + t + "," + t; n.style.TransitionDelay = t + "," + t + "," + t }, getShadowProperties: function (n) { if (n = n ? n.match(/(-?\d+px)|(rgba\(.+\))|(rgb\(.+\))|(#[abcdef\d]+)/g) : null, !n) return null; for (var r, t = 0, u = n.length, i = []; u > t; t++) -1 !== n[t].indexOf("px") ? i.push(parseInt(n[t], 10)) : r = n[t]; return i.push(r), 5 === i.length && i.splice(3, 1), i }, getDevicePixelRatio: function () { return window.devicePixelRatio || 1 }, isDocumentHidden: function () { return n ? document[n] : !1 }, triggerAnimation: function (n, t) { n.classList.remove(t); window.requestAnimationFrame(function () { n.offsetLeft; n.classList.add(t) }) }, getBackingStoreRatio: function (n) { return n.webkitBackingStorePixelRatio || n.mozBackingStorePixelRatio || n.msBackingStorePixelRatio || n.oBackingStorePixelRatio || n.backingStorePixelRatio || 1 }, setShadow: function (n, t, i, r, u) { n.shadowOffsetX = t; n.shadowOffsetY = i; n.shadowBlur = r; n.shadowColor = u }, getColorBetween: function (n, t, i) { function r(n, t) { return n + Math.round((t - n) * i) } function u(n) { n = Math.min(n, 255); n = Math.max(n, 0); var t = n.toString(16); return t.length < 2 && (t = "0" + t), t } return "#" + u(r(n.r, t.r)) + u(r(n.g, t.g)) + u(r(n.b, t.b)) }, getGradientColors: function (n, t, i) { for (var u = [], r = 0, f = i, o = 1 / (f - 1), e = 0; f > r; r++) u[r] = this.getColorBetween(n, t, e), e += o; return u }, hexToRgb: function (n) { var t = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n); return t ? { r: parseInt(t[1], 16), g: parseInt(t[2], 16), b: parseInt(t[3], 16) } : null }, drawGradientArc: function (n, t, i, r, u, f, e, o, s, h, c, l, a) { if (!(e > o)) { l && this.drawArc(n, t, i, r, u, f, e, o, s, "transparent", l, a); for (var y, b, d, g, nt, tt, it, rt = this.hexToRgb(h), ut = this.hexToRgb(c), ot = this.hexToRgb(this.getColorBetween(rt, ut, (e - u) / f)), st = this.hexToRgb(this.getColorBetween(rt, ut, (o - u) / f)), ft = o - e, ht = Math.ceil(30 * ft), k = this.getGradientColors(ot, st, ht), v = -this.QUART + this.CIRC * e, et = k.length, p = 0, w = this.CIRC * ft / et; et > p; p++) b = k[p], d = k[p + 1] || b, g = t + Math.cos(v) * r, tt = t + Math.cos(v + w) * r, nt = i + Math.sin(v) * r, it = i + Math.sin(v + w) * r, n.beginPath(), y = n.createLinearGradient(g, nt, tt, it), y.addColorStop(0, b), y.addColorStop(1, d), n.lineCap = a, n.strokeStyle = y, n.arc(t, i, r, v - .005, v + w + .005), n.lineWidth = s, n.stroke(), n.closePath(), v += w } }, drawArc: function (n, t, i, r, u, f, e, o, s, h, c, l) { var v, a; if (!(e > o)) { if (null !== h.gradient.colors && "follow" === h.gradient.type) return void this.drawGradientArc(n, t, i, r, u, f, e, o, s, h.gradient.colors[0], h.gradient.colors[1], c, l); c && (v = "transparent" === h.fill ? 9999 : 0, n.save(), n.translate(v, 0), this.setShadow(n, c[0] - v, c[1], c[2], c[3])); (n.beginPath(), n.lineWidth = s, n.arc(t, i, r, -this.QUART + this.CIRC * e, -this.QUART + this.CIRC * o, !1), h.gradient.colors) ? (a = "horizontal" === h.gradient.type ? n.createLinearGradient(0, r, 2 * r, r) : n.createLinearGradient(r, 0, r, 2 * r), a.addColorStop(0, h.gradient.colors[0]), a.addColorStop(1, h.gradient.colors[1]), n.strokeStyle = a) : n.strokeStyle = "transparent" === h.fill ? "#000" : h.fill; n.lineCap = l; n.stroke(); c && n.restore() } }, drawRing: function (n, t, i, r, u, f, e, o, s, h, c, l, a, v, y, p) { r + u > 1 && (r -= -1 + r + u, i += .5 * u); var w = i, b = i + r, k = t * r, d = .5 - Math.abs(-.5 + t), g = i + (k - d * u), nt = i + (k + (1 - d) * u); (e || c) && (p ? (this.drawArc(n, f, f, e, i, r, nt, b, o, s, h, y), this.drawArc(n, f, f, c, i, r, w, g, l, a, v, y)) : (this.drawArc(n, f, f, e, i, r, w, g, o, s, h, y), this.drawArc(n, f, f, c, i, r, nt, b, l, a, v, y))) }, setTextContent: function () { return "textContent" in document.body ? function (n, t) { n.textContent = t } : function (n, t) { n.innerText = t } }() }; return c }(); r.cap = function (n, t) { return n = n || 0, t = t || 1, function (i) { return Math.min(Math.max(i, n), t) } }; r.chain = function (n) { return function () { var t, i = n.toArray(arguments), r = i.length; return function (n) { for (t = 0; r > t; t++) n = i[t](n); return n } } }(u); r.chars = function () { return function (n) { return (n + "").split("") } }; r.diff = function (n) { return function (t) { return n - t } }; r.duplicate = function (n) { var t, i = new Array(n); return function (r) { for (t = n; t--;) i[t] = r; return i } }; r.duration = function (n) { function t(n, t) { return n.setMonth(n.getMonth() + t), n } function i(n) { return new Date(n.valueOf()) } function r(n, t) { return -1 !== t.indexOf(n) } function e(n, r) { var f, o, e = 12 * (r.getFullYear() - n.getFullYear()) + (r.getMonth() - n.getMonth()), u = t(i(n), e); return 0 > r - u ? (f = t(i(n), e - 1), o = (r - u) / (u - f)) : (f = t(i(n), e + 1), o = (r - u) / (f - u)), -(e + o) } var f = n.FORMATS, o = f.length, u = { M: 1, y: 12 }; return function (s, h, c, l) { var a = r("M", c), v = r("y", c); return function (h) { var d, p, w, y, b, nt, k = 0, g = []; for ((a || v || !l) && (d = new Date(s.valueOf() + h), p = e(d, s), nt = a ? Math.floor(p) : 12 * Math.floor(p / 12), h = d.valueOf() - t(i(s), nt).valueOf()) ; o > k; k++) y = f[k], 2 > k ? (w = Math.floor(p / u[y]), r(y, c) ? (p -= w * u[y], g.push(Math.max(0, w))) : l || (p -= w * u[y])) : (b = n.AMOUNT[y], w = Math.floor(h / b), r(y, c) ? (h %= b, g.push(Math.max(0, w))) : l || (h %= b)); return g } } }(u); r.event = function (n, t) { return function (i) { return n(i) && t(), i } }; r.modulate = function (n) { return function (t) { return parseInt(t, 10) % 2 == 0 ? n : "" } }; r.now = function () { return function () { return (new Date).getTime() } }; r.offset = function (n) { return function (t) { return n + t } }; r.pad = function (n) { return n = n || "", function (t) { return (n + t).slice(-n.length) } }; r.plural = function (n, t) { return function (i) { return 1 === parseInt(i, 10) ? n : t } }; r.progress = function (n, t) { return function (i) { return i = parseInt(i, 10), t > n ? i / t : (n - i) / n } }; s.Console = function () { var n = function (n) { this._transform = n.transform || function (n) { return n } }; return n.prototype = { redraw: function () { }, destroy: function () { return null }, getElement: function () { return null }, setValue: function (n) { console.log(this._transform(n)) } }, n }(); s.Fill = function (n) { var t = function (n) { this._wrapper = document.createElement("span"); this._wrapper.className = "soon-fill " + (n.className || ""); this._transform = n.transform || function (n) { return n }; this._direction = "to-top"; for (var t = 0, i = n.modifiers.length; i > t; t++) if (0 === n.modifiers[t].indexOf("to-")) { this._direction = n.modifiers[t]; break } this._fill = document.createElement("span"); this._fill.className = "soon-fill-inner"; this._progress = document.createElement("span"); this._progress.className = "soon-fill-progress"; this._fill.appendChild(this._progress); this._wrapper.appendChild(this._fill) }; return t.prototype = { redraw: function () { }, destroy: function () { return this._wrapper }, getElement: function () { return this._wrapper }, setValue: function (t) { var i, r = this._transform(t); switch (this._direction) { case "to-top": i = "translateY(" + (100 - 100 * r) + "%)"; break; case "to-top-right": i = "scale(1.45) rotateZ(-45deg) translateX(" + (-100 + 100 * r) + "%)"; break; case "to-top-left": i = "scale(1.45) rotateZ(45deg) translateX(" + (100 - 100 * r) + "%)"; break; case "to-left": i = "translateX(" + (100 - 100 * r) + "%)"; break; case "to-right": i = "translateX(" + (-100 + 100 * r) + "%)"; break; case "to-bottom-right": i = "scale(1.45) rotateZ(45deg) translateX(" + (-100 + 100 * r) + "%)"; break; case "to-bottom-left": i = "scale(1.45) rotateZ(-45deg) translateX(" + (100 - 100 * r) + "%)"; break; case "to-bottom": i = "translateY(" + (-100 + 100 * r) + "%)" } n.setTransform(this._progress, i) } }, t }(u); s.Flip = function (n) { var t = function (t) { this._wrapper = document.createElement("span"); this._wrapper.className = "soon-flip " + (t.className || ""); this._transform = t.transform || function (n) { return n }; this._inner = document.createElement("span"); this._inner.className = "soon-flip-inner"; this._card = document.createElement("span"); this._card.className = "soon-flip-card"; n.supportsAnimation() ? (this._front = document.createElement("span"), this._front.className = "soon-flip-front soon-flip-face", this._back = document.createElement("span"), this._back.className = "soon-flip-back soon-flip-face", this._card.appendChild(this._front), this._card.appendChild(this._back), this._top = document.createElement("span"), this._top.className = "soon-flip-top soon-flip-face", this._card.appendChild(this._top), this._bottom = document.createElement("span"), this._bottom.className = "soon-flip-bottom soon-flip-face", this._card.appendChild(this._bottom)) : (this._fallback = document.createElement("span"), this._fallback.className = "soon-flip-fallback", this._card.appendChild(this._fallback)); this._bounding = document.createElement("span"); this._bounding.className = "soon-flip-bounding"; this._card.appendChild(this._bounding); this._inner.appendChild(this._card); this._wrapper.appendChild(this._inner); this._frontValue = null; this._backValue = null; this._boundingLength = 0 }; return t.prototype = { redraw: function () { }, _setBoundingForValue: function (n) { var t = (n + "").length, i, r, u, f; if (t !== this._boundingLength) { for (this._boundingLength = t, i = "", r = 0; t > r; r++) i += "8"; this._bounding.textContent = i; u = parseInt(getComputedStyle(this._card).fontSize, 10); f = this._bounding.offsetWidth / u; this._inner.style.width = f + .1 * (t - 1) + "em" } }, destroy: function () { return this._wrapper }, getElement: function () { return this._wrapper }, setValue: function (t) { return t = this._transform(t), n.supportsAnimation() ? this._frontValue ? void (this._backValue && this._backValue === t || this._frontValue === t || (this._backValue && (this._bottom.textContent = this._backValue, this._front.textContent = this._backValue, this._frontValue = this._backValue), this._setBoundingForValue(t), this._top.textContent = t, this._back.textContent = t, this._backValue = t, n.triggerAnimation(this._inner, "soon-flip-animate"))) : (this._bottom.textContent = t, this._front.textContent = t, this._frontValue = t, void this._setBoundingForValue(t)) : (this._fallback.textContent = t, void this._setBoundingForValue(t)) } }, t }(u); s.Group = function (n) { var t = function (n) { this._wrapper = document.createElement("span"); this._wrapper.className = "soon-group " + (n.className || ""); this._inner = document.createElement("span"); this._inner.className = "soon-group-inner"; this._wrapper.appendChild(this._inner); this._transform = n.transform || function (n) { return n }; this._presenters = n.presenters; this._presenterStorage = [] }; return t.prototype = { redraw: function () { for (var n = this._presenterStorage.length - 1; n >= 0; n--) this._presenterStorage[n].redraw() }, destroy: function () { for (var n = this._presenterStorage.length - 1; n >= 0; n--) this._presenterStorage[n].destroy(); return this._wrapper }, getElement: function () { return this._wrapper }, setValue: function (t) { this._wrapper.setAttribute("data-value", t); t = this._transform(t); for (var i, r = 0, u = t instanceof Array, f = u ? t.length : this._presenters.length; f > r; r++) i = this._presenterStorage[r], i || (i = n(this._presenters[r]), this._inner.appendChild(i.getElement()), this._presenterStorage[r] = i), i.setValue(u ? t[r] : t) } }, t }(nt); s.Matrix = function () { for (var f, i, r = { " ": [[0, 0, 0, 0, 0], [0, 0, 0, 0, 0], [0, 0, 0, 0, 0], [0, 0, 0, 0, 0], [0, 0, 0, 0, 0], [0, 0, 0, 0, 0], [0, 0, 0, 0, 0]], 0: [[0, 1, 1, 1, 0], [1, 1, 0, 1, 1], [1, 1, 0, 1, 1], [1, 1, 0, 1, 1], [1, 1, 0, 1, 1], [1, 1, 0, 1, 1], [0, 1, 1, 1, 0]], 1: [[0, 0, 1, 1, 0], [0, 1, 1, 1, 0], [0, 0, 1, 1, 0], [0, 0, 1, 1, 0], [0, 0, 1, 1, 0], [0, 0, 1, 1, 0], [0, 1, 1, 1, 1]], 2: [[0, 1, 1, 1, 0], [1, 1, 0, 1, 1], [0, 0, 0, 1, 1], [0, 0, 1, 1, 0], [0, 1, 1, 0, 0], [1, 1, 0, 0, 0], [1, 1, 1, 1, 1]], 3: [[0, 1, 1, 1, 0], [1, 1, 0, 1, 1], [0, 0, 0, 1, 1], [0, 0, 1, 1, 0], [0, 0, 0, 1, 1], [1, 1, 0, 1, 1], [0, 1, 1, 1, 0]], 4: [[0, 0, 1, 1, 1], [0, 1, 0, 1, 1], [1, 1, 0, 1, 1], [1, 1, 1, 1, 1], [0, 0, 0, 1, 1], [0, 0, 0, 1, 1], [0, 0, 0, 1, 1]], 5: [[1, 1, 1, 1, 1], [1, 1, 0, 0, 0], [1, 1, 0, 0, 0], [1, 1, 1, 1, 0], [0, 0, 0, 1, 1], [1, 1, 0, 1, 1], [0, 1, 1, 1, 0]], 6: [[0, 1, 1, 1, 0], [1, 1, 0, 0, 0], [1, 1, 1, 1, 0], [1, 1, 0, 1, 1], [1, 1, 0, 1, 1], [1, 1, 0, 1, 1], [0, 1, 1, 1, 0]], 7: [[1, 1, 1, 1, 1], [0, 0, 0, 1, 1], [0, 0, 0, 1, 1], [0, 0, 1, 1, 0], [0, 1, 1, 0, 0], [1, 1, 0, 0, 0], [1, 1, 0, 0, 0]], 8: [[0, 1, 1, 1, 0], [1, 1, 0, 1, 1], [1, 1, 0, 1, 1], [0, 1, 1, 1, 0], [1, 1, 0, 1, 1], [1, 1, 0, 1, 1], [0, 1, 1, 1, 0]], 9: [[0, 1, 1, 1, 0], [1, 1, 0, 1, 1], [1, 1, 0, 1, 1], [1, 1, 0, 1, 1], [0, 1, 1, 1, 1], [0, 0, 0, 1, 1], [0, 1, 1, 1, 0]] }, u = r[0].length, n = r[0][0].length, e = 0, t = ""; u > e; e++) { for (t += '<span class="soon-matrix-row">', i = 0; n > i; i++) t += '<span class="soon-matrix-dot"><\/span>'; t += "<\/span>" } return f = function (n) { this._wrapper = document.createElement("span"); this._wrapper.className = "soon-matrix " + (n.className || ""); this._inner = document.createElement("span"); this._inner.className = "soon-matrix-inner"; this._wrapper.appendChild(this._inner); this._transform = n.transform || function (n) { return n }; this._value = [] }, f.prototype = { redraw: function () { }, destroy: function () { return this._wrapper }, getElement: function () { return this._wrapper }, _addChar: function () { var n = document.createElement("span"); return n.className = "soon-matrix-char", n.innerHTML = t, { node: n, ref: [] } }, _updateChar: function (t, i) { var f, h = r[i], e = 0, o = t.ref, s; if (!o.length) for (s = t.node.getElementsByClassName("soon-matrix-dot") ; u > e; e++) for (o[e] = [], f = 0; n > f; f++) o[e][f] = s[e * n + f]; for (; u > e; e++) for (f = 0; n > f; f++) o[e][f].setAttribute("data-state", 1 === h[e][f] ? "1" : "0") }, setValue: function (n) { var t, r, i; for (n = this._transform(n), n += "", n = n.split(""), t = 0, r = n.length; r > t; t++) i = this._value[t], i || (i = this._addChar(), this._inner.appendChild(i.node), this._value[t] = i), this._updateChar(i, n[t]) } }, f }(); s.Repeater = function (n) { var t = function (t) { this._wrapper = document.createElement("span"); this._wrapper.className = "soon-repeater " + (t.className || ""); this._delay = t.delay || 0; this._transform = t.transform || function (n) { return n }; this._destroyed = !1; this._presenter = t.presenter; this._Presenter = n(this._presenter.type); this._prepend = "undefined" == typeof t.prepend ? !0 : t.prepend; this._presenterStorage = [] }; return t.prototype = { redraw: function () { for (var n = this._presenterStorage.length - 1; n >= 0; n--) this._presenterStorage[n].redraw() }, destroy: function () { this._destroyed = !0; for (var n = this._presenterStorage.length - 1; n >= 0; n--) this._presenterStorage[n].destroy(); return this._wrapper }, getElement: function () { return this._wrapper }, setValue: function (n) { n = this._transform(n); n = n instanceof Array ? n : [n]; this._prepend && n.reverse(); for (var i, r, e, t = 0, u = n.length, f = 0, o = n.length !== this._wrapper.children.length; u > t; t++) i = this._presenterStorage[t], i || (i = new this._Presenter(this._presenter.options || {}), 0 !== this._wrapper.children.length && this._prepend ? this._wrapper.insertBefore(i.getElement(), this._wrapper.firstChild) : this._wrapper.appendChild(i.getElement()), this._presenterStorage[t] = i, this._delay && (f -= this._delay)), this._delay && !o ? (this._setValueDelayed(i, n[t], f), f += this._delay) : this._setValue(i, n[t], o); for (u = this._wrapper.children.length, e = t; u > t; t++) i = this._presenterStorage[t], r = i.destroy(), r.parentNode.removeChild(r), this._presenterStorage[t] = null; this._presenterStorage.length = e }, _setValueDelayed: function (n, t, i, r) { var u = this; setTimeout(function () { u._setValue(n, t, r) }, i) }, _setValue: function (n, t, i) { i && n.setValue(" "); n.setValue(t) } }, t }(tt); s.Ring = function (n, t) { var i = function (t) { this._wrapper = document.createElement("span"); this._wrapper.className = "soon-ring " + (t.className || ""); this._transform = t.transform || function (n) { return n }; this._modifiers = t.modifiers; this._animate = t.animate; this._canvas = document.createElement("canvas"); this._wrapper.appendChild(this._canvas); this._style = document.createElement("span"); this._style.className = "soon-ring-progress"; this._style.style.visibility = "hidden"; this._style.style.position = "absolute"; this._wrapper.appendChild(this._style); this._current = 0; this._target = null; this._destroyed = !1; this._lastTick = 0; this._styles = null; var i = this; n.supportsAnimation() && window.requestAnimationFrame(function (n) { i._tick(n) }) }; return i.prototype = { destroy: function () { return this._destroyed = !0, t.deregister(this._resizeBind), this._wrapper }, getElement: function () { return this._wrapper }, _getModifier: function (n) { for (var i, t, f, r = 0, e = this._modifiers.length, u = null; e > r; r++) if (-1 !== this._modifiers[r].indexOf(n)) { u = this._modifiers[r]; break } return u ? -1 === u.indexOf("-") ? !0 : (i = u.split("-"), -1 !== i[1].indexOf("_")) ? (t = i[1].split("_"), t[0] = "#" + t[0], t[1] = "#" + t[1], t) : (f = parseFloat(i[1]), isNaN(f) ? i[1] : f / 100) : null }, redraw: function () { var i = window.getComputedStyle(this._style), r; this._styles = { offset: this._getModifier("offset") || 0, gap: this._getModifier("gap") || 0, length: this._getModifier("length") || 1, flip: this._getModifier("flip") || !1, invert: this._getModifier("invert") || null, align: "center", size: 0, radius: 0, padding: parseInt(i.getPropertyValue("padding-bottom"), 10) || 0, cap: 0 === parseInt(i.getPropertyValue("border-top-right-radius"), 10) ? "butt" : "round", progressColor: { fill: i.getPropertyValue("color") || "#000", gradient: { colors: this._getModifier("progressgradient") || null, type: this._getModifier("progressgradienttype") || "follow" } }, progressWidth: parseInt(i.getPropertyValue("border-top-width"), 10) || 2, progressShadow: n.getShadowProperties(i.getPropertyValue("text-shadow")), ringColor: { fill: i.getPropertyValue("background-color") || "#fff", gradient: { colors: this._getModifier("ringgradient") || null, type: this._getModifier("ringgradienttype") || "follow" } }, ringWidth: parseInt(i.getPropertyValue("border-bottom-width"), 10) || 2, ringShadow: n.getShadowProperties(i.getPropertyValue("box-shadow")) }; var f = this._canvas.getContext("2d"), t = this._canvas.parentNode.clientWidth, e = n.getDevicePixelRatio(), o = n.getBackingStoreRatio(f), u = e / o, s = 125 > t ? Math.min(1, .005 * t) : 1; (this._styles.ringWidth = Math.ceil(this._styles.ringWidth * s), this._styles.progressWidth = Math.ceil(this._styles.progressWidth * s), "transparent" === this._styles.ringColor.fill && (this._styles.ringColor.fill = "rgba(0,0,0,0)"), "transparent" === this._styles.progressColor.fill && (this._styles.progressColor.fill = "rgba(0,0,0,0)"), "round" === this._styles.cap && -1 === this._modifiers.join("").indexOf("gap-") && (this._styles.gap = .5 * (this._styles.ringWidth + this._styles.progressWidth) * .005), t) && (e !== o ? (this._canvas.width = t * u, this._canvas.height = t * u, this._canvas.style.width = t + "px", this._canvas.style.height = t + "px", f.scale(u, u)) : (this._canvas.width = t, this._canvas.height = t), this._styles.size = .5 * t, r = this._styles.size - this._styles.padding, this._styles.ringRadius = r - .5 * this._styles.ringWidth, this._styles.progressRadius = r - .5 * this._styles.progressWidth, this._styles.progressWidth === this._styles.ringWidth ? this._styles.progressRadius = this._styles.ringRadius : this._styles.progressWidth < this._styles.ringWidth ? -1 !== this._modifiers.indexOf("align-center") ? this._styles.progressRadius = this._styles.ringRadius : -1 !== this._modifiers.indexOf("align-bottom") ? this._styles.progressRadius = r - (this._styles.ringWidth - .5 * this._styles.progressWidth) : -1 !== this._modifiers.indexOf("align-inside") && (this._styles.progressRadius = r - (this._styles.ringWidth + .5 * this._styles.progressWidth)) : -1 !== this._modifiers.indexOf("align-center") ? this._styles.ringRadius = this._styles.progressRadius : -1 !== this._modifiers.indexOf("align-bottom") ? this._styles.ringRadius = r - (this._styles.progressWidth - .5 * this._styles.ringWidth) : -1 !== this._modifiers.indexOf("align-inside") && (this._styles.ringRadius = r - (this._styles.progressWidth + .5 * this._styles.ringWidth)), -1 !== this._modifiers.indexOf("glow-progress") && this._styles.progressShadow && (this._styles.progressShadow[this._styles.progressShadow.length - 1] = null !== this._styles.progressColor.gradient.colors ? this._styles.progressColor.gradient.colors[0] : this._styles.progressColor.fill), -1 !== this._modifiers.indexOf("glow-background") && this._styles.ringShadow && (this._styles.ringShadow[this._styles.ringShadow.length - 1] = null !== this._styles.ringColor.gradient.colors ? this._styles.ringColor.gradient.colors[0] : this._styles.ringColor.fill), this._current = null) }, _tick: function (n) { if (!this._destroyed) { null !== this._target && this._draw(n); var t = this; window.requestAnimationFrame(function (n) { t._tick(n) }) } }, _draw: function (t) { var i, u, r, f; if (this._animate) { if (i = t - this._lastTick, u = 250 > i ? 1e3 / i : 30, this._lastTick = t, this._current === this._target) return; this._current += (this._target - this._current) / (u / 3); Math.abs(this._current - this._target) <= .001 && (this._current = this._target) } else this._current = this._target; r = this._canvas.getContext("2d"); r.clearRect(0, 0, this._canvas.width, this._canvas.height); f = this._styles.flip ? 1 - this._current : this._current; n.drawRing(r, f, this._styles.offset, this._styles.length, this._styles.gap, this._styles.size, this._styles.ringRadius, this._styles.ringWidth, this._styles.ringColor, this._styles.ringShadow, this._styles.progressRadius, this._styles.progressWidth, this._styles.progressColor, this._styles.progressShadow, this._styles.cap, this._styles.invert) }, setValue: function (t) { this._styles || this.redraw(); t = this._transform(t); this._target !== t && (this._target = t); n.supportsAnimation() || (this._current = this._target, this._draw()) } }, i }(u, o); s.Slot = function (n) { var t = function (n) { this._forceReplace = "undefined" == typeof n.forceReplace ? !1 : n.forceReplace; this._wrapper = document.createElement("span"); this._wrapper.className = "soon-slot " + (n.className || ""); this._transform = n.transform || function (n) { return n }; this._new = document.createElement("span"); this._new.className = "soon-slot-new"; this._old = document.createElement("span"); this._old.className = "soon-slot-old"; this._bounding = document.createElement("span"); this._bounding.className = "soon-slot-bounding"; this._inner = document.createElement("span"); this._inner.className = "soon-slot-inner soon-slot-animate"; this._inner.appendChild(this._old); this._inner.appendChild(this._new); this._inner.appendChild(this._bounding); this._wrapper.appendChild(this._inner); this._newValue = ""; this._oldValue = ""; this._boundingLength = 0 }; return t.prototype = { redraw: function () { }, destroy: function () { return this._wrapper }, getElement: function () { return this._wrapper }, _isEmpty: function () { return !this._newValue }, _isSame: function (n) { return this._newValue === n }, _setBoundingForValue: function (n) { var t = (n + "").length, i, r, u, f; if (t !== this._boundingLength) { for (this._boundingLength = t, i = "", r = 0; t > r; r++) i += "8"; this._bounding.textContent = i; u = parseInt(getComputedStyle(this._wrapper).fontSize, 10); f = this._bounding.offsetWidth / u; this._inner.style.width = f + .1 * (t - 1) + "em" } }, _setNewValue: function (n) { this._newValue = n; " " !== n && (this._new.textContent = n) }, _setOldValue: function (n) { this._oldValue = n; this._old.textContent = n }, setValue: function (t) { t = this._transform(t); this._isEmpty() ? (this._setNewValue(t), this._setBoundingForValue(t), n.triggerAnimation(this._inner, "soon-slot-animate")) : this._isSame(t) && !this._forceReplace || (this._newValue.length && this._setOldValue(this._newValue), this._setNewValue(t), this._setBoundingForValue(t), n.triggerAnimation(this._inner, "soon-slot-animate")) } }, t }(u); s.Text = function (n) { var t = function (n) { this._wrapper = document.createElement("span"); this._wrapper.className = "soon-text " + (n.className || ""); this._transform = n.transform || function (n) { return n } }; return t.prototype = { redraw: function () { }, destroy: function () { return this._wrapper }, getElement: function () { return this._wrapper }, setValue: function (t) { n.setTextContent(this._wrapper, this._transform(t)) } }, t }(u); var dt = function (n, t) { var i = function (n, i) { i = i || {}; this._rate = i.rate || 1e3; this._offset = null; this._time = 0; this._paused = !1; this._nextTickReference = null; this._tickBind = this._tick.bind(this); this._onTick = n || function () { }; "addEventListener" in document && document.addEventListener(t.documentVisibilityEvent, this) }; return i.prototype = { handleEvent: function () { t.isDocumentHidden() ? this._lock() : this._unlock() }, isRunning: function () { return null !== this._offset }, isPaused: function () { return this.isRunning() && this._paused }, start: function () { this.isRunning() || this.reset() }, getTime: function () { return this._time }, reset: function () { this.pause(); this._offset = (new Date).getTime(); this._time = 0; this.resume() }, stop: function () { var n = this; setTimeout(function () { n._clearTimer(); n._offset = null }, 0) }, pause: function () { this._paused = !0; this._clearTimer() }, resume: function () { if (this.isPaused()) { this._paused = !1; var n = (new Date).getTime(); this._time += n - this._offset; this._offset = n; this._tick() } }, _clearTimer: function () { clearTimeout(this._nextTickReference); this._nextTickReference = null }, _lock: function () { this._clearTimer() }, _unlock: function () { this.isPaused() || (this.pause(), this.resume()) }, _tick: function () { this._onTick(this._time); this._offset += this._rate; this._time += this._rate; this._nextTickReference = n.setTimeout(this._tickBind, this._offset - (new Date).getTime()) } }, i }(this, u), it = [], rt = 0, v = ["xxl", "xl", "l", "m", "s", "xs", "xxs"], gt = 3, h = (v.length, []), w = [], c = { y: { labels: "Year,Years", option: "Years", padding: "" }, M: { labels: "Month,Months", option: "Months", padding: "00" }, w: { labels: "Week,Weeks", option: "Weeks", padding: "00" }, d: { labels: "Day,Days", option: "Days", padding: "000" }, h: { labels: "Hour,Hours", option: "Hours", padding: "00" }, m: { labels: "Minute,Minutes", option: "Minutes", padding: "00" }, s: { labels: "Second,Seconds", option: "Seconds", padding: "00" }, ms: { labels: "Millisecond,Milliseconds", option: "Milliseconds", padding: "000" } }; o.register(ot); ut = /([\d]+)[\s]+([a-z]+)/i; ft = /([\d]+)[:]*([\d]{2})*[:]*([\d]{2})*/; e.parse = function (n) { p(n) }; e.redraw = function (n) { n ? y(n) : b() }; e.reset = function (n) { var t = l(n); t && t.ticker.reset() }; e.freeze = function (n) { var t = l(n); t && t.ticker.pause() }; e.unfreeze = function (n) { var t = l(n); t && t.ticker.resume() }; e.setOption = function (n, t, i) { var u = l(n), r; u && (r = u.options, r[t] = i, this.destroy(n), this.create(n, r)) }; e.destroy = function (n) { var i = k(n), r, t; null !== i && (r = ht(n), null !== r && w.splice(r, 1), t = h[i], t.ticker && t.ticker.stop(), t.presenter.destroy(), t.node.removeChild(t.node.querySelector(".soon-group")), n.removeAttribute("data-initialized"), h.splice(i, 1)) }; e.create = function (n, t) { var e, l, w, f, h, k, d; if (!t) return p(n); if ("true" === n.getAttribute("data-initialized")) return null; n.setAttribute("data-initialized", "true"); e = null; l = null; t.eventComplete && (e = "string" == typeof t.eventComplete ? window[t.eventComplete] : t.eventComplete); t.eventTick && (l = "string" == typeof t.eventTick ? window[t.eventTick] : t.eventTick); t.due && -1 !== t.due.indexOf("reset") && (e = kt(n, t, e), t.eventComplete = e); a(n, t, "layout"); a(n, t, "face"); a(n, t, "visual"); a(n, t, "format"); t.scaleMax && n.setAttribute("data-scale-max", t.scaleMax); t.scaleHide && n.setAttribute("data-scale-hide", t.scaleHide); var i, r, s, v = (t.format || "d,h,m,s").split(","), g = -1 === v.indexOf("ms") ? 1e3 : 24, y = {}; for (i in c) c.hasOwnProperty(i) && (r = c[i], s = (t["labels" + r.option] || r.labels).split(","), y[i] = s[0], y[i + "_s"] = s[1] || s[0]); w = "undefined" == typeof t.padding ? !0 : t.padding; f = {}; for (i in c) c.hasOwnProperty(i) && (r = c[i], w ? (f[i] = bt(i, v), null === f[i] && (f[i] = r.padding), t["padding" + r.option] && (f[i] = t["padding" + r.option])) : f[i] = ""); var nt = (t.face || "text ").split(" ")[0], tt = t.due ? wt(t.due) : null, b = t.since ? u.isoToDate(t.since) : null, it = t.now ? u.isoToDate(t.now) : b ? null : new Date, o = { due: tt, since: b, now: it, view: nt, visual: t.visual || null, format: v, separator: t.separator || null, cascade: "undefined" == typeof t.cascade ? !0 : u.toBoolean(t.cascade), singular: t.singular, reflect: t.reflect || !1, chars: "undefined" == typeof t.separateChars ? !0 : u.toBoolean(t.separateChars), label: y, padding: f, callback: { onComplete: e || function () { }, onTick: l || function () { } } }; return u.isSlow() && (o.view = "text", o.reflect = !1, o.visual = null), h = null, k = at(o, function () { h && h.stop(); o.callback.onComplete() }), ct(n), d = yt(n, k), h = pt(n, d, g, t) }; !function (n) { et = n() }(function (n) { function e(n) { for (f = 1; n = r.shift() ;) n() } var i, r = [], o = !1, t = document, s = t.documentElement, u = s.doScroll, h = "DOMContentLoaded", c = "addEventListener", l = "onreadystatechange", a = "readyState", v = u ? /^loaded|^c/ : /^loaded|c/, f = v.test(t[a]); return t[c] && t[c](h, i = function () { t.removeEventListener(h, i, o); e() }, o), u && t.attachEvent(l, i = function () { /^c/.test(t[a]) && (t.detachEvent(l, i), e()) }), n = u ? function (t) { self != top ? f ? t() : r.push(t) : function () { try { s.doScroll("left") } catch (i) { return setTimeout(function () { n(t) }, 50) } t() }() } : function (n) { f ? n() : r.push(n) } }); et(function () { var t = document.querySelector("script[src*=soon]"); if (!t || "false" !== t.getAttribute("data-auto")) for (var i = document.getElementsByClassName ? document.getElementsByClassName("soon") : document.querySelectorAll(".soon"), n = 0, r = i.length; r > n; n++) p(i[n]) }), function (n, t) { t && (t.fn.soon = function (t) { return t = t || {}, this.each(function () { n.create(this, t) }) }, t.fn.soon.destroy = function () { return this.each(function () { n.destroy(this) }) }, t.fn.soon.reset = function () { return this.each(function () { n.reset(this) }) }, t.fn.soon.resize = function () { return this.each(function () { n.resize(this) }) }, t.fn.soon.freeze = function () { return this.each(function () { n.freeze(this) }) }, t.fn.soon.unfreeze = function () { return this.each(function () { n.unfreeze(this) }) }, t.fn.soon.setOption = function (t, i) { return this.each(function () { n.setOption(this, t, i) }) }) }(e, t); "undefined" != typeof module && module.exports ? module.exports = e : "function" == typeof define && define.amd ? define(function () { return e }) : n.Soon = e } }(window, window.jQuery)