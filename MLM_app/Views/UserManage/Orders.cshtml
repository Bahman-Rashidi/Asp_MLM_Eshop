@using MLM_app.Helpers
@using MLM_app.Models;
@using Microsoft.AspNet.Identity
@*@model List<MLM_app.Models.OrderDetail>*@
@model PagedList.IPagedList<MLM_app.ViewModels.OrderDetailsViewModel>
@{
    ViewBag.Title = "My Orders";
    Layout = "~/Views/Shared/_LayoutMLM.cshtml";
}
@{
    var db = new ApplicationDbContext();
    string userId = User.Identity.GetUserId();
}
<h2 class="title text-center">My Orders</h2>

<section id="cart_items">
    <div class="container">
        <div class="table-responsive cart_info">
            <table class="table table-condensed table-hover">
                <thead>
                    <tr class="cart_menu text-center">
                        <td>Product code</td>
                        <td>Quantity</td>
                        <td>Name</td>

                        <td>  @Html.ActionLink("Purchase Date", "Orders", new { sortOrder = ViewBag.OrderDate })</td>
                           <td>Price</td>
                    </tr>
                </thead>
                <tbody class="text-center">
                    @if (Model.Count == 0)
                    {
                        <tr>
                            <td colspan="4">You haven't submitted any orders!</td>
                        </tr>
                    }
                    else
                    {
                        foreach (var item in Model)
                        {
                            <tr>
                                <td>@item.ProductID</td>
                                <td>@item.OrderedCount</td>
                                <td>@item.ProductTitle</td>
                          <td>@item.OrderDate</td>
                                <td>                                    
                                    @Html.OffProduct(item.Off,item.Price)                                                                        
                                </td>
                            </tr>
                        }
                    }

                </tbody>
            </table>
        </div>
    </div>
</section>
<br />
<div class="pagination-container">
    <div style="margin-left: 20px;">
        page  @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber)  from  @Model.PageCount
    </div>
</div>


@Html.PagedListPager(Model, page => Url.Action("Orders", new { page, sortOrder = ViewBag.CurrentSort, currentFilter = ViewBag.CurrentFilter }))

@section scripts
{
    

    <style>
        .pagination-container
        {

            float: left;


        }
    </style>
}
